import{c as l,u as y,e as k,r as n,j as e,b as S}from"./index-DAzHI3n1.js";import{u as C,a as _}from"./useGameEngine-fE9R23Wp.js";import{S as z}from"./shield-DzHBr9sw.js";import{B as D}from"./book-open-Dg4TxNc0.js";import{C as E}from"./calendar-gkNxfkOM.js";import"./supabase-DQQ9Tr4x.js";const T=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],M=l("check",T);const R=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],b=l("dollar-sign",R);const A=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],$=l("file-text",A);const P=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],H=l("save",P);const I=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Q=l("x",I),V=r=>{const o=Math.ceil(r/20);return Array.from({length:o},(c,s)=>({id:`auto-set-${Date.now()}-${s}`,index:s+1,wordCount:Math.min(20,r-s*20),status:s===0?"open":"locked"}))};function G(){const{role:r}=C(),i=y(),{refundRequests:o,processRefund:c}=_();k.useEffect(()=>{r!=="master"&&i("/dashboard")},[r,i]);const[s,x]=n.useState(""),[a,p]=n.useState(""),[g,j]=n.useState(3),[h,f]=n.useState(100),[d,u]=n.useState([]),v={totalStudents:42},m=()=>{const t=a.trim().split(/\s+/).length,N=V(t);u(N)},w=()=>{!s||!a||(alert(`Deploying Quest: ${s}
Target: All Students
Sets: ${d.length}
Reward: ${h} pts`),x(""),p(""),u([]))};return e.jsxs("div",{className:"min-h-screen bg-obsidian text-paper font-mono p-4 md:p-8",children:[e.jsxs("header",{className:"flex items-center justify-between border-b border-purple-500/30 pb-6 mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-serif text-purple-400 flex items-center gap-3",children:[e.jsx(z,{className:"fill-current"}),"Control Tower"]}),e.jsx("p",{className:"text-xs text-stone-500 uppercase tracking-widest mt-1",children:"Administrator Access Level: Alpha"})]}),e.jsxs("div",{className:"flex gap-4 text-xs",children:[e.jsxs("div",{className:"px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded text-purple-300",children:["Active Students: ",e.jsx("span",{className:"text-white font-bold",children:v.totalStudents})]}),e.jsx("button",{onClick:()=>i("/dashboard"),className:"hover:text-white transition-colors",children:"[Exit to Student View]"})]})]}),e.jsxs("main",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-black/40 border border-white/10 rounded-xl p-6",children:[e.jsxs("h2",{className:"text-xl font-serif text-white mb-6 flex items-center gap-2",children:[e.jsx(D,{size:20,className:"text-babel-gold"}),"Quest Architect"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs uppercase tracking-widest text-stone-500 mb-2",children:"Quest Title"}),e.jsx("input",{type:"text",value:s,onChange:t=>x(t.target.value),className:"w-full bg-black border border-white/20 rounded p-3 text-white focus:border-purple-500 outline-none transition-colors",placeholder:"e.g., Week 2: The Crossing"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs uppercase tracking-widest text-stone-500 mb-2 flex items-center gap-2",children:[e.jsx(E,{size:12})," Deadline (Days)"]}),e.jsx("input",{type:"number",value:g,onChange:t=>j(parseInt(t.target.value)),className:"w-full bg-black border border-white/20 rounded p-3 text-white focus:border-purple-500 outline-none"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs uppercase tracking-widest text-stone-500 mb-2 flex items-center gap-2",children:[e.jsx(b,{size:12})," Reward (Pts)"]}),e.jsx("input",{type:"number",value:h,onChange:t=>f(parseInt(t.target.value)),className:"w-full bg-black border border-white/20 rounded p-3 text-white focus:border-purple-500 outline-none"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs uppercase tracking-widest text-stone-500 mb-2 flex items-center gap-2",children:[e.jsx($,{size:12})," Raw Data Source (Words)"]}),e.jsx("textarea",{value:a,onChange:t=>{p(t.target.value)},onBlur:m,className:"w-full h-40 bg-black border border-white/20 rounded p-3 text-xs font-mono text-stone-300 focus:border-purple-500 outline-none resize-none",placeholder:"Paste word list or text content here..."}),e.jsx("div",{className:"text-right text-[10px] text-stone-600 mt-1",children:a.length>0?`${a.trim().split(/\s+/).length} words detected`:"Waiting for input..."})]}),e.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[e.jsx("button",{onClick:m,className:"px-4 py-2 bg-stone-800 text-stone-300 rounded hover:bg-stone-700 transition-colors text-xs uppercase tracking-widest",children:"Analyze & Preview"}),e.jsxs("button",{onClick:w,disabled:!s||!a,className:"px-6 py-2 bg-purple-600 text-white rounded hover:bg-purple-500 transition-colors text-xs uppercase tracking-widest font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(H,{size:14})," Deploy to World"]})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[d.length>0&&e.jsxs("div",{className:"bg-black/40 border border-white/10 rounded-xl p-6 animate-in fade-in slide-in-from-bottom-4",children:[e.jsx("h3",{className:"text-sm font-bold text-stone-400 mb-4 uppercase tracking-widest",children:"Extraction Preview"}),e.jsx("div",{className:"space-y-2",children:d.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-purple-500/20 text-purple-400 flex items-center justify-center text-xs font-bold",children:t.index}),e.jsxs("div",{className:"text-xs text-stone-300",children:["Quest Sequence #",t.index]})]}),e.jsxs("div",{className:"text-[10px] text-stone-500 font-mono",children:["~ ",t.wordCount," Words"]})]},t.id))}),e.jsx("div",{className:"mt-4 p-3 bg-green-900/20 border border-green-500/30 rounded text-center",children:e.jsxs("p",{className:"text-xs text-green-400",children:["System Ready: ",d.length," Sets will be generated."]})})]}),e.jsxs("div",{className:"bg-black/40 border border-white/10 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-sm font-bold text-stone-400 mb-4 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(b,{size:14,className:"text-green-500"})," Refund Requests (Cash Out)"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2 custom-scrollbar",children:o.length===0?e.jsx("div",{className:"text-xs text-stone-600 italic text-center py-8",children:"No pending requests"}):o.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded border border-white/10 hover:border-white/20 transition-colors",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold text-white mb-1",children:t.user}),e.jsxs("div",{className:"text-[10px] text-stone-500 uppercase tracking-widest",children:[t.amount," Pts â€¢ ",new Date(t.date).toLocaleDateString()]})]}),e.jsx("div",{className:"flex items-center gap-2",children:t.status==="pending"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>c(t.id,!0),className:"p-1 hover:bg-green-500/20 text-green-500 rounded",children:e.jsx(M,{size:14})}),e.jsx("button",{onClick:()=>c(t.id,!1),className:"p-1 hover:bg-red-500/20 text-red-500 rounded",children:e.jsx(Q,{size:14})})]}):e.jsx("span",{className:S("text-[10px] uppercase font-bold px-2 py-0.5 rounded",t.status==="approved"?"bg-green-900/30 text-green-500":"bg-red-900/30 text-red-500"),children:t.status})})]},t.id))})]})]})]})]})}export{G as default};
