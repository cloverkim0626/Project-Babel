import{c as A,r as l,j as e,b as M,C as fe,u as xe,i as ge,e as he,S as ie,s as je}from"./index-CxDURwdF.js";import{S as me,U as se,T as ae,C as X,M as ve,a as Ne,L as J,P as Z,b as we,G as ye,c as ke,d as Se,e as Ce}from"./ContinentManager-D2hn9vEO.js";import{C as Ae}from"./calendar-BlloJ6Qi.js";import{B as re}from"./book-open-HbqM0iWU.js";import{S as _e}from"./skull-BJrRaref.js";import{T as be}from"./triangle-alert-OKjj1Yfx.js";import{C as ze}from"./clock-CfoMDaUY.js";import{X as K}from"./x-CSBxUgK7.js";import{A as ce}from"./arrow-right-BrORxS2w.js";import"./globe-D88iF9za.js";import"./circle-alert-DdIaksX2.js";import"./arrow-left-CDGCNdZG.js";const Le=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Me=A("book",Le);const Te=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ue=A("chart-column",Te);const De=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Oe=A("chevron-left",De);const Ie=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],ee=A("coins",Ie);const Re=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M12 18v-4",key:"q1q25u"}],["path",{d:"M16 18v-6",key:"15y0np"}]],te=A("file-chart-column-increasing",Re);const Ee=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],le=A("file-text",Ee);const $e=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Pe=A("folder-open",$e);const Be=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],qe=A("funnel",Be);const Ve=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],We=A("history",Ve);const He=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Ke=A("layout-dashboard",He);const Fe=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Ue=A("log-out",Fe);const Ge=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],oe=A("search",Ge);const Qe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Xe=A("settings",Qe),Ye=()=>{const[o,d]=l.useState({totalPassages:0,totalProjects:0,totalVocabulary:0,activeStudents:0}),[a,n]=l.useState([]),[h,x]=l.useState([]),[_,z]=l.useState([]),[I,T]=l.useState(!0);return l.useEffect(()=>{(async()=>{try{const c="https://fdopvjopmmoadhoefkcf.supabase.co",R="sb_publishable_NT2tJi14GBr8Uh3I9SDROg_zM_v5KTi";let w="";try{w=c.split("//")[1].split(".")[0]}catch{}const W=`sb-${w}-auth-token`,f=localStorage.getItem(W)||localStorage.getItem(Object.keys(localStorage).find(v=>v.startsWith("sb-")&&v.endsWith("-auth-token"))||"");if(!f)return;const E=JSON.parse(f).access_token,g={apikey:R,Authorization:`Bearer ${E}`,"Content-Type":"application/json"},[r,m,u]=await Promise.all([fetch(`${c}/rest/v1/passages?select=count`,{headers:g,method:"HEAD"}),fetch(`${c}/rest/v1/continents?select=count`,{headers:g,method:"HEAD"}),fetch(`${c}/rest/v1/users?select=count`,{headers:g,method:"HEAD"})]),y=await fetch(`${c}/rest/v1/missions?select=count`,{headers:g,method:"HEAD"}),D=v=>{const j=v.headers.get("content-range");return j?parseInt(j.split("/")[1]):0};d({totalPassages:D(r),totalProjects:D(m),totalVocabulary:D(y)*20,activeStudents:D(u)});const k=await fetch(`${c}/rest/v1/users?select=id,name`,{headers:g}).then(v=>v.json());if(k&&k.length>0){const v=k.slice(0,2).map(H=>({studentId:H.id,studentName:H.name||"Unknown",prevAvg:85,currentAvg:62,dropRate:27}));n(v);const j=Array.from({length:7},(H,N)=>{const S=new Date;return S.setDate(S.getDate()-(6-N)),{date:S.toISOString().split("T")[0].slice(5),count:Math.floor(Math.random()*50)+10}});x(j),z([{word:"Ephemeral",meaning:"ìˆ˜ëª…ì´ ì§§ì€, ë§ì—†ëŠ”",incorrectCount:15},{word:"Ubiquitous",meaning:"ì–´ë””ì—ë‚˜ ìžˆëŠ”",incorrectCount:12},{word:"Serendipity",meaning:"ëœ»ë°–ì˜ í–‰ìš´",incorrectCount:9}])}}catch(c){console.error("Dashboard Fetch Error",c)}finally{T(!1)}})()},[]),I?e.jsx("div",{className:"p-12 text-center text-babel-gold font-serif animate-pulse text-2xl",children:"Loading the Archives..."}):e.jsxs("div",{className:"p-8 space-y-8 min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-[#78350f] pb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-4xl font-serif text-[#fbbf24] flex items-center gap-4 text-glow-gold",children:[e.jsx(me,{size:32,className:"text-[#fbbf24]"}),"Grand Observatory"]}),e.jsx("p",{className:"text-[#a8a29e] text-sm mt-2 ml-1 font-serif italic opacity-80",children:'"The lighthouse that watches over the sea of knowledge."'})]}),e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 ancient-panel rounded-sm text-[#fbbf24] font-mono text-xs ancient-border-gold",children:[e.jsx(Ae,{size:14}),new Date().toLocaleDateString()]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(Q,{icon:e.jsx(le,{size:24}),label:"Recorded Tomes",value:o.totalPassages,sub:"Passages Archived"}),e.jsx(Q,{icon:e.jsx(Pe,{size:24}),label:"Active Realms",value:o.totalProjects,sub:"Project Continents"}),e.jsx(Q,{icon:e.jsx(re,{size:24}),label:"Words of Power",value:o.totalVocabulary,sub:"Generated Vocab",isGold:!0}),e.jsx(Q,{icon:e.jsx(se,{size:24}),label:"Seekers",value:o.activeStudents,sub:"Active Students"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("section",{className:"ancient-card p-6 relative group",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-[#d4af37]/50"}),e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h3",{className:"text-xl text-[#eaddcf] font-serif flex items-center gap-2 text-glow-gold",children:[e.jsx(We,{className:"text-[#fbbf24]"}),"Weekly Mana Flow (7 Days)"]})}),e.jsx("div",{className:"flex items-end justify-between gap-2 h-32 px-4",children:h.map((b,c)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2 group/bar",children:[e.jsx("div",{className:"w-full bg-[#1c1917] rounded-sm relative overflow-hidden h-full flex flex-col justify-end border border-[#44403c] shadow-inner",children:e.jsx("div",{style:{height:`${Math.min(100,b.count*2)}%`},className:"w-full bg-gradient-to-t from-[#78350f] to-[#fbbf24] opacity-80 group-hover/bar:opacity-100 transition-all duration-500 relative shadow-[0_0_10px_#fbbf24]",children:e.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/diagmonds-light.png')] opacity-20"})})}),e.jsx("span",{className:"text-[10px] text-[#a8a29e] font-serif",children:b.date})]},c))})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-xl text-[#ef4444] font-serif flex items-center gap-2 pl-2 border-l-4 border-[#ef4444] text-glow-fire",children:[e.jsx(_e,{size:20}),"Cursed Condition Detected (Slump > 20%)"]}),a.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map(b=>e.jsxs("div",{className:"ancient-panel border border-[#7f1d1d] p-4 rounded-sm flex justify-between items-center shadow-[0_0_15px_rgba(127,29,29,0.2)]",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg text-[#fca5a5] font-serif font-bold",children:b.studentName}),e.jsxs("div",{className:"text-xs text-[#f87171] mt-1",children:["Avg Score Drop: ",b.prevAvg,"% â†’ ",b.currentAvg,"%"]})]}),e.jsxs("div",{className:"text-2xl font-black text-[#dc2626] animate-pulse text-glow-fire",children:["-",b.dropRate,"%"]})]},b.studentId))}):e.jsx("div",{className:"p-6 text-[#a8a29e] italic text-center border border-dashed border-[#44403c] rounded-sm",children:'"The sanctuary is peaceful. No curses detected."'})]})]}),e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"relative ancient-scroll p-8 rounded-sm shadow-xl transform rotate-1 hover:rotate-0 transition-transform duration-500",children:[e.jsx("div",{className:"absolute -top-3 left-0 right-0 h-6 bg-[url('/assets/tex-sidebar.png')] bg-cover rounded shadow-lg border-b border-[#292524]"}),e.jsx("div",{className:"absolute -bottom-3 left-0 right-0 h-6 bg-[url('/assets/tex-sidebar.png')] bg-cover rounded shadow-lg border-t border-[#292524]"}),e.jsx("h3",{className:"text-center font-serif text-2xl font-bold border-b-2 border-[#292524] pb-2 mb-4 tracking-wider text-[#451a03]",children:"FORBIDDEN WORDS"}),e.jsx("div",{className:"space-y-6",children:_.map((b,c)=>e.jsxs("div",{className:"relative pl-8 group cursor-pointer",children:[e.jsx("span",{className:"absolute left-0 top-0 font-serif text-3xl font-black text-[#7f1d1d] opacity-50 group-hover:opacity-100 transition-opacity",children:c+1}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold font-serif text-[#292524]",children:b.word}),e.jsx("div",{className:"text-sm font-serif italic text-[#57534e] mt-1",children:b.meaning}),e.jsxs("div",{className:"text-xs text-[#7f1d1d] mt-1 font-mono",children:[b.incorrectCount," Failures recorded"]})]})]},c))})]})})]})]})},Q=({icon:o,label:d,value:a,sub:n,isGold:h})=>e.jsxs("div",{className:M("ancient-card p-6 transition-all duration-300 group cursor-pointer hover:-translate-y-1 hover:shadow-[0_10px_30px_rgba(0,0,0,0.5)]",h?"border-opacity-100 ring-1 ring-[#fbbf24]":"border-opacity-80"),children:[e.jsx("div",{className:"absolute -right-12 -top-12 w-24 h-24 bg-white/5 rounded-full blur-2xl group-hover:bg-[#fbbf24]/10 transition-colors"}),e.jsxs("div",{className:"flex items-start justify-between relative z-10",children:[e.jsxs("div",{children:[e.jsx("div",{className:M("mb-2 font-serif text-xs uppercase tracking-[0.2em]",h?"text-[#fbbf24]":"text-[#a8a29e]"),children:d}),e.jsx("div",{className:M("text-3xl font-serif font-bold text-glow-gold",h?"text-[#fffbeb]":"text-[#eaddcf]"),children:a.toLocaleString()}),e.jsx("div",{className:M("mt-1 text-xs italic",h?"text-[#fde68a]":"text-[#a8a29e]"),children:n})]}),e.jsx("div",{className:M("p-3 rounded border ancient-panel shadow-inner",h?"border-[#fbbf24] text-[#fbbf24]":"border-[#44403c] text-[#a8a29e]"),children:o})]})]}),pe=o=>o>=95?{grade:"A+",color:"text-emerald-400"}:o>=90?{grade:"A",color:"text-emerald-400"}:o>=85?{grade:"B+",color:"text-blue-400"}:o>=80?{grade:"B",color:"text-blue-400"}:o>=75?{grade:"C+",color:"text-yellow-400"}:o>=70?{grade:"C",color:"text-yellow-400"}:o>=60?{grade:"D",color:"text-orange-400"}:o>=50?{grade:"D-",color:"text-orange-400"}:{grade:"F",color:"text-red-400"},de=[{id:"s1",name:"ê¹€ë¯¼ì¤€",level:3,incompleteCount:2,avgScoreRate:85,weeklyAssignment:{projectName:"9ì›” ëª¨ì˜ê³ ì‚¬ A",passCount:4,totalSequences:5,scoreRate:85},pendingRefund:{amount:5e3,requestedAt:"2026-01-10"},stats:{accuracy:78,speed:65,persistence:82,knowledge:71},incompleteSequences:[{missionName:"9ì›” ëª¨ì˜ê³ ì‚¬ A",setIndex:5,dueDate:"1/15"},{missionName:"Voca Day 3",setIndex:2,dueDate:"1/12"}]},{id:"s2",name:"ì´ì„œì—°",level:4,incompleteCount:5,avgScoreRate:72,weeklyAssignment:{projectName:"9ì›” ëª¨ì˜ê³ ì‚¬ A",passCount:2,totalSequences:5,scoreRate:72},pendingRefund:null,stats:{accuracy:68,speed:72,persistence:55,knowledge:65},incompleteSequences:[{missionName:"9ì›” ëª¨ì˜ê³ ì‚¬ A",setIndex:3,dueDate:"1/10"},{missionName:"9ì›” ëª¨ì˜ê³ ì‚¬ A",setIndex:4,dueDate:"1/12"},{missionName:"9ì›” ëª¨ì˜ê³ ì‚¬ A",setIndex:5,dueDate:"1/15"},{missionName:"Voca Day 1",setIndex:1,dueDate:"1/8"},{missionName:"Voca Day 2",setIndex:3,dueDate:"1/11"}]},{id:"s3",name:"ë°•ì§€í›ˆ",level:2,incompleteCount:0,avgScoreRate:95,weeklyAssignment:{projectName:"Voca Day 1-5",passCount:5,totalSequences:5,scoreRate:95},pendingRefund:null,stats:{accuracy:92,speed:88,persistence:95,knowledge:90},incompleteSequences:[]},{id:"s4",name:"ìµœì˜ˆì€",level:5,incompleteCount:0,avgScoreRate:98,weeklyAssignment:{projectName:"9ì›” ëª¨ì˜ê³ ì‚¬ A",passCount:5,totalSequences:5,scoreRate:100},pendingRefund:{amount:1e4,requestedAt:"2026-01-08"},stats:{accuracy:96,speed:91,persistence:99,knowledge:95},incompleteSequences:[]},{id:"s5",name:"ì •í•˜ìœ¤",level:1,incompleteCount:8,avgScoreRate:45,weeklyAssignment:{projectName:"Voca Day 1-5",passCount:1,totalSequences:5,scoreRate:60},pendingRefund:null,stats:{accuracy:42,speed:55,persistence:30,knowledge:38},incompleteSequences:[{missionName:"Voca Day 1",setIndex:2,dueDate:"1/5"},{missionName:"Voca Day 1",setIndex:3,dueDate:"1/6"},{missionName:"Voca Day 2",setIndex:1,dueDate:"1/7"},{missionName:"Voca Day 2",setIndex:2,dueDate:"1/8"},{missionName:"Voca Day 3",setIndex:1,dueDate:"1/9"},{missionName:"Voca Day 3",setIndex:2,dueDate:"1/10"},{missionName:"Voca Day 4",setIndex:1,dueDate:"1/11"},{missionName:"Voca Day 5",setIndex:1,dueDate:"1/12"}]}],Je=({student:o,onClose:d})=>{const{grade:a,color:n}=pe(o.avgScoreRate);return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:d}),e.jsxs("div",{className:"relative bg-stone-900 border border-babel-gold/30 rounded-2xl p-6 w-full max-w-md shadow-2xl",children:[e.jsx("button",{onClick:d,className:"absolute top-4 right-4 text-stone-500 hover:text-white",children:e.jsx(K,{size:20})}),e.jsxs("h3",{className:"text-xl font-serif text-babel-gold mb-4 flex items-center gap-2",children:[e.jsx(ue,{size:20}),o.name," í•™ìŠµ íŠ¹ì„±"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-white/10 text-center",children:[e.jsx("div",{className:"text-xs text-stone-500 mb-1",children:"í‰ê·  ë“ì ë¥ "}),e.jsxs("div",{className:M("text-2xl font-bold",n),children:[o.avgScoreRate,"%"]})]}),e.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-white/10 text-center",children:[e.jsx("div",{className:"text-xs text-stone-500 mb-1",children:"ë“±ê¸‰"}),e.jsx("div",{className:M("text-2xl font-bold",n),children:a})]})]}),e.jsx("div",{className:"bg-black/40 p-4 rounded-lg border border-white/10 space-y-3",children:[{label:"ì •í™•ë„",key:"accuracy",icon:"ðŸŽ¯"},{label:"ì†ë„",key:"speed",icon:"âš¡"},{label:"ëˆê¸°",key:"persistence",icon:"ðŸ’ª"},{label:"ì§€ì‹",key:"knowledge",icon:"ðŸ“š"}].map(h=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-lg",children:h.icon}),e.jsx("span",{className:"text-xs text-stone-400 w-12",children:h.label}),e.jsx("div",{className:"flex-1 h-2 bg-black rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-babel-gold rounded-full transition-all",style:{width:`${o.stats[h.key]}%`}})}),e.jsx("span",{className:"text-xs text-white w-8 text-right",children:o.stats[h.key]})]},h.key))})]}),e.jsx("button",{onClick:d,className:"w-full mt-4 px-4 py-3 bg-babel-gold text-black font-bold rounded-lg hover:bg-yellow-500",children:"ë‹«ê¸°"})]})]})},Ze=({student:o,onClose:d})=>e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:d}),e.jsxs("div",{className:"relative bg-stone-900 border border-red-500/30 rounded-2xl p-6 w-full max-w-lg shadow-2xl",children:[e.jsx("button",{onClick:d,className:"absolute top-4 right-4 text-stone-500 hover:text-white",children:e.jsx(K,{size:20})}),e.jsxs("h3",{className:"text-xl font-serif text-red-400 mb-4 flex items-center gap-2",children:[e.jsx(be,{size:20}),o.name," ë¯¸ì™„ê³¼ì œ ëª©ë¡ (",o.incompleteCount,"ê°œ)"]}),e.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:o.incompleteSequences.length>0?o.incompleteSequences.map((a,n)=>e.jsxs("div",{className:"flex items-center justify-between bg-black/40 p-3 rounded-lg border border-white/10",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-white",children:a.missionName}),e.jsxs("div",{className:"text-xs text-stone-500",children:["ì‹œí€€ìŠ¤ ",a.setIndex]})]}),e.jsxs("div",{className:"text-xs text-red-400",children:["ê¸°í•œ: ",a.dueDate]})]},n)):e.jsx("div",{className:"text-center text-stone-500 py-8",children:"ë¯¸ì™„ê³¼ì œ ì—†ìŒ"})}),e.jsx("button",{onClick:d,className:"w-full mt-4 px-4 py-3 border border-white/20 text-stone-400 rounded-lg hover:bg-white/5",children:"ë‹«ê¸°"})]})]}),et=({student:o,onComplete:d,onCancel:a})=>{const n=o.pendingRefund;return n?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:a}),e.jsxs("div",{className:"relative bg-stone-900 border border-babel-gold/30 rounded-2xl p-6 w-full max-w-md shadow-2xl",children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-stone-500 hover:text-white",children:e.jsx(K,{size:20})}),e.jsxs("h3",{className:"text-xl font-serif text-babel-gold mb-4 flex items-center gap-2",children:[e.jsx(ee,{size:20}),"í¬ì¸íŠ¸ í™˜ê¸‰"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-white/10",children:[e.jsx("div",{className:"text-xs text-stone-500",children:"í™˜ê¸‰ì•¡"}),e.jsxs("div",{className:"text-babel-gold font-bold text-xl",children:[n.amount.toLocaleString(),"ì›"]})]}),e.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-white/10",children:[e.jsx("div",{className:"text-xs text-stone-500",children:"ì‹ ì²­ì¼"}),e.jsx("div",{className:"text-white",children:n.requestedAt})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:a,className:"flex-1 py-3 border border-white/20 text-stone-400 rounded-lg hover:bg-white/5",children:"ì·¨ì†Œ"}),e.jsx("button",{onClick:()=>{alert(`${o.name} í™˜ê¸‰ ì™„ë£Œ`),d()},className:"flex-1 py-3 bg-babel-gold text-black font-bold rounded-lg hover:bg-yellow-500",children:"ì²˜ë¦¬"})]})]})]}):null},tt=({student:o,onClose:d})=>{const[a,n]=l.useState("2026-01");return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:d}),e.jsxs("div",{className:"relative bg-stone-900 border border-babel-gold/30 rounded-2xl p-6 w-full max-w-lg shadow-2xl",children:[e.jsx("button",{onClick:d,className:"absolute top-4 right-4 text-stone-500 hover:text-white",children:e.jsx(K,{size:20})}),e.jsxs("h3",{className:"text-xl font-serif text-babel-gold mb-4 flex items-center gap-2",children:[e.jsx(te,{size:20}),"ì›”ê°„ ë¦¬í¬íŠ¸ - ",o.name]}),e.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[e.jsx("button",{onClick:()=>n("2025-12"),className:"p-2 hover:bg-white/10 rounded-lg text-stone-400",children:e.jsx(Oe,{size:20})}),e.jsx("span",{className:"px-4 py-2 bg-black/40 rounded-lg text-white",children:a==="2026-01"?"2026ë…„ 1ì›”":"2025ë…„ 12ì›”"}),e.jsx("button",{onClick:()=>n("2026-01"),className:"p-2 hover:bg-white/10 rounded-lg text-stone-400",children:e.jsx(X,{size:20})})]}),e.jsxs("div",{className:"bg-black/40 p-8 rounded-lg border border-white/10 text-center",children:[e.jsx(te,{size:48,className:"mx-auto mb-4 text-stone-600"}),e.jsx("p",{className:"text-stone-500",children:"API ì—°ë™ ì˜ˆì •"})]}),e.jsx("button",{onClick:d,className:"w-full mt-4 px-4 py-3 bg-babel-gold text-black font-bold rounded-lg hover:bg-yellow-500",children:"ë‹«ê¸°"})]})]})},st=()=>{const[o,d]=l.useState(""),[a,n]=l.useState("name"),[h,x]=l.useState(null),[_,z]=l.useState(null),[I,T]=l.useState(null),[b,c]=l.useState(null),[R,w]=l.useState(de),W=r=>{w(m=>m.map(u=>u.id===r?{...u,pendingRefund:null}:u)),x(null)},f=r=>{w(m=>m.filter(u=>u.id!==r))},E=l.useMemo(()=>{let r=[...R];return o&&(r=r.filter(m=>m.name.toLowerCase().includes(o.toLowerCase()))),r.sort((m,u)=>a==="name"?m.name.localeCompare(u.name,"ko"):a==="score"?u.avgScoreRate-m.avgScoreRate:a==="incomplete"?u.incompleteCount-m.incompleteCount:0),r},[o,a]),g=de.filter(r=>r.pendingRefund).length;return e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-serif text-white flex items-center gap-3",children:[e.jsx(se,{size:24,className:"text-babel-gold"}),"í•™ìƒ DB"]}),e.jsx("p",{className:"text-xs text-stone-500 mt-1",children:"í•™ìƒ í•™ìŠµ í˜„í™© ë° ê´€ë¦¬"})]}),g>0&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-babel-gold/10 border border-babel-gold/30 rounded-lg text-babel-gold text-sm",children:[e.jsx(ee,{size:16}),"í™˜ê¸‰ ëŒ€ê¸°: ",g,"ê±´"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(oe,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-stone-500"}),e.jsx("input",{type:"text",placeholder:"í•™ìƒ ê²€ìƒ‰...",value:o,onChange:r=>d(r.target.value),className:"w-full pl-12 pr-4 py-3 bg-black/40 border border-white/10 rounded-xl text-white placeholder-stone-600 focus:border-babel-gold/50 focus:outline-none"})]}),e.jsxs("select",{value:a,onChange:r=>n(r.target.value),className:"bg-black/40 border border-white/10 rounded-lg px-4 py-3 text-white text-sm",children:[e.jsx("option",{value:"name",children:"ì´ë¦„ìˆœ"}),e.jsx("option",{value:"score",children:"ë“ì ìˆœ"}),e.jsx("option",{value:"incomplete",children:"ë¯¸ì™„ìˆœ"})]})]}),e.jsxs("div",{className:"bg-black/40 border border-white/10 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2 p-4 border-b border-white/10 bg-black/20 text-[10px] text-stone-500 uppercase tracking-widest",children:[e.jsx("div",{className:"col-span-2",children:"í•™ìƒ"}),e.jsx("div",{className:"col-span-1 text-center",children:"ë“±ê¸‰"}),e.jsx("div",{className:"col-span-1 text-center",children:"ë¯¸ì™„"}),e.jsx("div",{className:"col-span-2",children:"ì´ë²ˆì£¼"}),e.jsx("div",{className:"col-span-2 text-center",children:"ìˆ˜í–‰"}),e.jsx("div",{className:"col-span-1 text-center",children:"ë“ì "}),e.jsx("div",{className:"col-span-1 text-center",children:"í™˜ê¸‰"}),e.jsx("div",{className:"col-span-2 text-right",children:"ì•¡ì…˜"})]}),e.jsx("div",{className:"divide-y divide-white/5",children:E.map(r=>{const{grade:m,color:u}=pe(r.avgScoreRate),y=r.weeklyAssignment.passCount===r.weeklyAssignment.totalSequences;return e.jsxs("div",{className:M("grid grid-cols-12 gap-2 p-4 items-center hover:bg-white/5",r.incompleteCount>5&&"bg-red-900/10"),children:[e.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-babel-gold/20 rounded-full flex items-center justify-center text-babel-gold text-xs font-bold",children:r.name[0]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white text-sm font-medium",children:r.name}),e.jsxs("button",{onClick:()=>T(r),className:"text-[10px] text-babel-gold hover:underline flex items-center gap-0.5",children:[e.jsx(ue,{size:10}),"STAT"]})]})]}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx("span",{className:M("text-lg font-bold",u),children:m})}),e.jsx("div",{className:"col-span-1 text-center",children:r.incompleteCount>0?e.jsxs("button",{onClick:()=>c(r),className:"inline-flex items-center gap-1 px-2 py-1 bg-red-900/30 border border-red-500/30 rounded text-red-400 text-xs font-bold hover:bg-red-900/50",children:[e.jsx(be,{size:10}),r.incompleteCount]}):e.jsx("span",{className:"text-emerald-400 text-xs",children:"âœ“"})}),e.jsx("div",{className:"col-span-2 text-xs text-white truncate",children:r.weeklyAssignment.projectName}),e.jsx("div",{className:"col-span-2 text-center",children:e.jsxs("span",{className:M("inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-bold",y?"bg-emerald-900/30 text-emerald-400 border border-emerald-500/30":"bg-blue-900/30 text-blue-400 border border-blue-500/30"),children:[y?e.jsx(fe,{size:10}):e.jsx(ze,{size:10}),r.weeklyAssignment.passCount,"/",r.weeklyAssignment.totalSequences]})}),e.jsxs("div",{className:"col-span-1 text-center text-sm font-bold",style:{color:r.weeklyAssignment.scoreRate<70?"#f87171":"#4ade80"},children:[r.weeklyAssignment.scoreRate,"%"]}),e.jsx("div",{className:"col-span-1 text-center",children:r.pendingRefund?e.jsx("button",{onClick:()=>x(r),className:"px-2 py-1 bg-babel-gold/20 border border-babel-gold/30 rounded text-babel-gold text-[10px] font-bold animate-pulse",children:e.jsx(ee,{size:10})}):e.jsx("span",{className:"text-stone-600 text-xs",children:"-"})}),e.jsxs("div",{className:"col-span-2 flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>z(r),className:"px-2 py-1 border border-white/10 rounded text-[10px] text-stone-400 hover:text-white hover:bg-babel-gold/10",title:"Report",children:e.jsx(te,{size:12})}),e.jsx("button",{onClick:()=>{confirm(`${r.name} í•™ìƒì„ ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)&&(f(r.id),alert("í•™ìƒì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."))},className:"px-2 py-1 border border-white/10 rounded text-[10px] text-stone-400 hover:text-red-400 hover:bg-red-900/20",title:"Delete",children:e.jsx(ae,{size:12})})]})]},r.id)})}),e.jsxs("div",{className:"p-4 bg-black/30 border-t border-white/10 flex justify-between text-xs text-stone-500",children:[e.jsxs("span",{children:["ì´ ",E.length,"ëª…"]}),e.jsxs("span",{children:["ìœ„í—˜êµ°(F): ",E.filter(r=>r.avgScoreRate<50).length,"ëª…"]})]})]}),h&&e.jsx(et,{student:h,onComplete:()=>W(h.id),onCancel:()=>x(null)}),_&&e.jsx(tt,{student:_,onClose:()=>z(null)}),I&&e.jsx(Je,{student:I,onClose:()=>T(null)}),b&&e.jsx(Ze,{student:b,onClose:()=>c(null)})]})},at=({onCreate:o})=>{const d=xe(),a=ge(),[n,h]=l.useState([]),[x,_]=l.useState(!0),[z,I]=l.useState(null),[T,b]=l.useState(!1),[c,R]=l.useState([]),[w,W]=l.useState(""),[f,E]=l.useState("ALL"),[g,r]=l.useState("ALL"),[m,u]=l.useState("ALL"),[y,D]=l.useState("ALL"),[k,v]=l.useState("ALL");l.useEffect(()=>{j()},[]),l.useEffect(()=>{if(n.length>0&&a.state&&a.state.newProjectId){const t=a.state.newProjectId,i=n.find(L=>L.id===t);i&&(I({...i,isNew:!0}),window.history.replaceState({},document.title))}},[n,a]);const j=async()=>{try{_(!0);const t="https://fdopvjopmmoadhoefkcf.supabase.co",i="sb_publishable_NT2tJi14GBr8Uh3I9SDROg_zM_v5KTi";let L="";try{L=t.split("//")[1].split(".")[0]}catch{}const P=`sb-${L}-auth-token`,B=localStorage.getItem(P)||localStorage.getItem(Object.keys(localStorage).find(V=>V.startsWith("sb-")&&V.endsWith("-auth-token"))||"");if(!B){console.warn("[ProjectList] No auth token found"),_(!1);return}const $=JSON.parse(B).access_token,q=await fetch(`${t}/rest/v1/continents?select=*&order=created_at.desc`,{method:"GET",headers:{apikey:i,Authorization:`Bearer ${$}`,"Content-Type":"application/json"}});if(q.ok){const V=await q.json();h(V)}else console.error("[ProjectList] Fetch failed:",await q.text())}catch(t){console.error("[ProjectList] Error:",t)}finally{_(!1)}},H=async()=>{if(c.length&&confirm(`ì„ íƒí•œ ${c.length}ê°œ í”„ë¡œì íŠ¸ë¥¼ ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`))try{const t="https://fdopvjopmmoadhoefkcf.supabase.co",i="sb_publishable_NT2tJi14GBr8Uh3I9SDROg_zM_v5KTi";let L="";try{L=t.split("//")[1].split(".")[0]}catch{}const P=`sb-${L}-auth-token`,B=localStorage.getItem(P)||localStorage.getItem(Object.keys(localStorage).find(p=>p.startsWith("sb-")&&p.endsWith("-auth-token"))||"");if(!B)throw new Error("No Auth Token Found");const $=JSON.parse(B).access_token,q={apikey:i,Authorization:`Bearer ${$}`,"Content-Type":"application/json"},V=c.join(","),s=await fetch(`${t}/rest/v1/continents?id=in.(${V})`,{method:"DELETE",headers:q});if(!s.ok)throw new Error(await s.text());alert("ì‚­ì œ ì™„ë£Œ"),R([]),j()}catch(t){alert("ì‚­ì œ ì‹¤íŒ¨: "+t.message)}},N=l.useMemo(()=>n.filter(t=>{if(w){const i=w.toLowerCase();if(!(t.display_name.toLowerCase().includes(i)||t.name.toLowerCase().includes(i)))return!1}return!(f!=="ALL"&&t.metadata?.category!==f||f==="TEXTBOOK"&&g!=="ALL"&&t.metadata?.textbook?.subject!==g||f==="MOCK"&&(m!=="ALL"&&t.metadata?.mock?.year!==m||y!=="ALL"&&t.metadata?.mock?.grade!==y)||f==="OTHER"&&k!=="ALL"&&t.metadata?.other?.publisher!==k)}),[n,w,f,g,m,y,k]),S=l.useMemo(()=>{const t=i=>Array.from(new Set(n.map(i).filter(Boolean))).sort();return{subjects:t(i=>i.metadata?.category==="TEXTBOOK"?i.metadata.textbook?.subject:void 0),years:t(i=>i.metadata?.category==="MOCK"?i.metadata.mock?.year:void 0),grades:t(i=>i.metadata?.category==="MOCK"?i.metadata.mock?.grade:void 0),publishers:t(i=>i.metadata?.category==="OTHER"?i.metadata.other?.publisher:void 0)}},[n]),U=()=>{E("ALL"),r("ALL"),u("ALL"),D("ALL"),v("ALL"),W("")};return x?e.jsx("div",{className:"p-8 text-[#d4af37] animate-pulse text-center font-serif text-xl mt-20",children:"Unsealing the Archives..."}):e.jsxs("div",{className:"p-8 max-w-7xl mx-auto min-h-screen",children:[T&&e.jsx(ve,{onClose:()=>b(!1)}),z&&e.jsx(Ne,{continent:z,initialView:z.isNew?"add":"list",onClose:()=>{I(null),j()}}),e.jsxs("div",{className:"flex flex-col gap-8 mb-12",children:[e.jsxs("div",{className:"flex justify-between items-end border-b border-[#78350f] pb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-4xl font-serif text-[#fbbf24] mb-2 flex items-center gap-3 drop-shadow-md text-glow-gold",children:[e.jsx(Me,{size:32,className:"text-[#fbbf24]"})," The Knowledge Repository"]}),e.jsx("p",{className:"text-[#a8a29e] text-sm italic opacity-80 pl-1",children:'"Select a Time to open, or inscribe a new one."'})]}),e.jsxs("div",{className:"flex gap-3",children:[c.length>0&&e.jsxs("button",{onClick:H,className:"bg-[#450a0a] hover:bg-[#7f1d1d] text-[#fca5a5] border border-[#7f1d1d] px-5 py-2 rounded-sm font-serif font-bold flex items-center gap-2 transition-colors shadow-lg",children:[e.jsx(ae,{size:16})," Burn Selected (",c.length,")"]}),e.jsx("button",{onClick:()=>{c.length===N.length?R([]):R(N.map(t=>t.id))},className:"bg-[#292524] hover:bg-[#1c1917] text-[#a8a29e] px-5 py-2 rounded-sm font-serif font-bold transition-all border border-[#57534e] hover:border-[#d4af37]",children:c.length>0&&c.length===N.length?"Deselect All":"Select All"}),e.jsxs("button",{onClick:()=>b(!0),className:"bg-[#292524] hover:bg-[#1c1917] text-[#eaddcf] px-5 py-2 rounded-sm font-serif font-bold flex items-center gap-2 transition-all border border-[#57534e] hover:border-[#d4af37] shadow-lg",children:[e.jsx(J,{size:16})," Quick Deploy"]}),e.jsxs("button",{onClick:()=>d("/admin/create-project"),className:"ancient-button px-6 py-2 rounded-sm font-serif font-bold flex items-center gap-2 shadow-[0_0_15px_rgba(212,175,55,0.4)] hover:shadow-[0_0_25px_rgba(212,175,55,0.6)] transform hover:-translate-y-0.5 border border-[#d4af37]",children:[e.jsx(Z,{size:16})," Inscribe New"]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-2 top-0 bottom-0 w-2 bg-[#57534e] rounded-l-md shadow-md"}),e.jsx("div",{className:"absolute -right-2 top-0 bottom-0 w-2 bg-[#57534e] rounded-r-md shadow-md"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 bg-[#eaddcf] p-4 shadow-[inset_0_0_20px_rgba(0,0,0,0.2)] border-y-4 double border-[#78350f]",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[#78350f] mr-4 pr-4 border-r border-[#d6c4a6]",children:[e.jsx(qe,{size:18}),e.jsx("span",{className:"text-xs font-serif font-bold tracking-widest uppercase",children:"Filters"})]}),e.jsxs("select",{value:f,onChange:t=>{E(t.target.value),r("ALL"),u("ALL"),D("ALL"),v("ALL")},className:"bg-[#f5ebe0] border border-[#d6c4a6] rounded-sm px-3 py-1.5 text-xs text-[#57534e] font-serif font-bold outline-none focus:border-[#78350f] shadow-inner cursor-pointer",children:[e.jsx("option",{value:"ALL",children:"All Categories"}),e.jsx("option",{value:"TEXTBOOK",children:"êµê³¼ì„œ (Textbooks)"}),e.jsx("option",{value:"MOCK",children:"ëª¨ì˜ê³ ì‚¬ (Mock Tests)"}),e.jsx("option",{value:"OTHER",children:"ê¸°íƒ€ (Others)"})]}),f==="TEXTBOOK"&&e.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-left-4",children:[e.jsx(X,{size:14,className:"text-[#a8a29e]"}),e.jsxs("select",{value:g,onChange:t=>r(t.target.value),className:"bg-[#f5ebe0] border border-[#d6c4a6] rounded-sm px-3 py-1.5 text-xs text-[#57534e] font-serif font-bold outline-none focus:border-[#78350f] shadow-inner cursor-pointer",children:[e.jsx("option",{value:"ALL",children:"All XML Subjects"}),S.subjects.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),f==="MOCK"&&e.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-left-4",children:[e.jsx(X,{size:14,className:"text-[#a8a29e]"}),e.jsxs("select",{value:m,onChange:t=>u(t.target.value),className:"bg-[#f5ebe0] border border-[#d6c4a6] rounded-sm px-3 py-1.5 text-xs text-[#57534e] font-serif font-bold outline-none focus:border-[#78350f] shadow-inner cursor-pointer",children:[e.jsx("option",{value:"ALL",children:"Year"}),S.years.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:y,onChange:t=>D(t.target.value),className:"bg-[#f5ebe0] border border-[#d6c4a6] rounded-sm px-3 py-1.5 text-xs text-[#57534e] font-serif font-bold outline-none focus:border-[#78350f] shadow-inner cursor-pointer",children:[e.jsx("option",{value:"ALL",children:"Grade"}),S.grades.map(t=>e.jsx("option",{value:t,children:t==="High 1"?"ê³ 1":t==="High 2"?"ê³ 2":"ê³ 3"},t))]})]}),f==="OTHER"&&e.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-left-4",children:[e.jsx(X,{size:14,className:"text-[#a8a29e]"}),e.jsxs("select",{value:k,onChange:t=>v(t.target.value),className:"bg-[#f5ebe0] border border-[#d6c4a6] rounded-sm px-3 py-1.5 text-xs text-[#57534e] font-serif font-bold outline-none focus:border-[#78350f] shadow-inner cursor-pointer",children:[e.jsx("option",{value:"ALL",children:"Publisher"}),S.publishers.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{className:"ml-auto relative",children:[e.jsx("input",{type:"text",placeholder:"Search the archives...",value:w,onChange:t=>W(t.target.value),className:"bg-[#f5ebe0] border border-[#d6c4a6] rounded-full pl-9 pr-4 py-1.5 text-xs text-[#57534e] font-serif w-56 focus:w-72 transition-all outline-none focus:border-[#78350f] shadow-inner placeholder-[#a8a29e]"}),e.jsx(oe,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#a8a29e]"})]}),(f!=="ALL"||w)&&e.jsx("button",{onClick:U,className:"text-[#a8a29e] hover:text-[#7f1d1d] p-1 transition-colors",children:e.jsx(K,{size:16})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[e.jsxs("div",{onClick:()=>d("/admin/create-project"),className:"h-36 border-2 border-dashed border-[#57534e] rounded bg-[#1c1917]/50 flex flex-col items-center justify-center gap-3 cursor-pointer hover:border-[#d4af37] hover:bg-[#292524] transition-all group relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-10 animate-pulse"}),e.jsx("div",{className:"w-12 h-12 rounded-full bg-[#0c0a09] flex items-center justify-center group-hover:bg-[#d4af37] group-hover:text-[#0c0a09] transition-colors border border-[#44403c] text-[#57534e] z-10",children:e.jsx(Z,{size:24})}),e.jsx("span",{className:"text-[#57534e] font-serif font-bold tracking-widest text-xs group-hover:text-[#d4af37] transition-colors z-10",children:"INSCRIBE NEW"})]}),N.map(t=>{let i="";t.metadata?.category==="TEXTBOOK"?i=`${t.metadata.textbook?.subject}`:t.metadata?.category==="MOCK"?i=`${t.metadata.mock?.year} Â· ${t.metadata.mock?.month}`:t.metadata?.category==="OTHER"&&(i=t.metadata.other?.publisher||"Other");const L={TEXTBOOK:"êµê³¼ì„œ",MOCK:"ëª¨ì˜ê³ ì‚¬",OTHER:"ê¸°íƒ€"}[t.metadata?.category||"OTHER"]||"ê¸°íƒ€",P=c.includes(t.id);return e.jsxs("div",{onClick:()=>I(t),className:`h-36 relative rounded border p-0 transition-all group overflow-hidden flex flex-col cursor-pointer shadow-lg hover:transform hover:-translate-y-1 hover:shadow-[0_10px_30px_rgba(0,0,0,0.5)] bg-[url('/assets/tex-sidebar.png')] bg-cover ${P?"border-[#d4af37] ring-2 ring-[#d4af37]":"border-[#451a03] hover:border-[#b45309]"}`,children:[e.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-3 z-10 border-r border-black/20 ${t.metadata?.category==="TEXTBOOK"?"bg-[#1e3a8a]":t.metadata?.category==="MOCK"?"bg-[#581c87]":"bg-[#44403c]"}`}),e.jsx("div",{className:"absolute top-2 left-5 z-20 cursor-pointer p-2 -m-2",onClick:B=>{B.stopPropagation(),R($=>$.includes(t.id)?$.filter(q=>q!==t.id):[...$,t.id])},children:e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all shadow-md ${P?"bg-[#d4af37] border-[#fffbeb] text-[#422006]":"bg-[#0c0a09]/60 border-[#57534e] text-transparent hover:border-[#d4af37]"}`,children:e.jsx(we,{size:12,strokeWidth:4})})}),e.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-2 border-r-2 border-[#d4af37]/20 rounded-tr group-hover:border-[#d4af37]/50 transition-colors pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-2 border-r-2 border-[#d4af37]/20 rounded-br group-hover:border-[#d4af37]/50 transition-colors pointer-events-none"}),e.jsxs("div",{className:"flex-1 pl-6 p-4 flex flex-col justify-between relative z-0",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("div",{className:"text-[10px] text-[#292524] font-mono flex justify-end font-bold opacity-60",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("h3",{className:`font-serif font-bold text-lg leading-tight truncate pr-2 transition-colors drop-shadow-sm ${P?"text-[#d4af37]":"text-[#eaddcf] group-hover:text-[#f5ebe0]"}`,children:t.display_name}),e.jsxs("p",{className:"text-[10px] text-[#a8a29e] font-serif truncate",children:["ID: ",t.name]})]}),e.jsxs("div",{className:"flex items-end justify-between mt-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"flex items-center gap-1.5 text-[10px] text-[#78716c] bg-[#eaddcf]/90 px-2 py-1 rounded border border-[#292524] font-bold",children:[e.jsx(J,{size:10})," ",i||"General"]})}),e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-sm border font-serif font-bold uppercase tracking-wider ${t.metadata?.category==="TEXTBOOK"?"bg-[#1e3a8a]/20 text-[#60a5fa] border-[#1e3a8a]/40":t.metadata?.category==="MOCK"?"bg-[#581c87]/20 text-[#c084fc] border-[#581c87]/40":"bg-[#292524] text-[#a8a29e] border-[#44403c]"}`,children:L})]})]})]},t.id)})]}),N.length===0&&e.jsxs("div",{className:"mt-20 text-center text-[#57534e] font-serif",children:[e.jsx("div",{className:"mb-4 opacity-30",children:e.jsx(me,{size:64,className:"mx-auto"})}),e.jsx("p",{className:"text-xl",children:"No Tomes found in the Archives."})]})]})},rt=({onCancel:o,onComplete:d})=>{const{user:a}=he(),[n,h]=l.useState(1),[x,_]=l.useState("custom"),[z,I]=l.useState("ê³µí†µì˜ì–´1"),[T,b]=l.useState(""),[c,R]=l.useState(""),[w,W]=l.useState("2025"),[f,E]=l.useState("3"),[g,r]=l.useState("1"),[m,u]=l.useState(""),[y,D]=l.useState(""),[k,v]=l.useState(""),[j,H]=l.useState([]),[N,S]=l.useState([]),[U,t]=l.useState(!1),i=()=>{m||(x==="textbook"&&T&&c?u(`${T} ${z} - Ch.${c}`):x==="mock"&&u(`${w}ë…„ ${f}ì›” ê³ ${g} í•™í‰ ë³€í˜•`))},L=()=>{if(!k.trim())return;if(x==="mock"&&!y.trim())return alert("Please enter a Question Number (e.g. 39).");const s={id:crypto.randomUUID(),questionNum:x==="mock"?y:`Part ${j.length+1}`,text:k};H(p=>[...p,s]),v(""),D("")},P=s=>{H(p=>p.filter(O=>O.id!==s))},B=async()=>{if(j.length!==0){t(!0),S([]);try{const s=[];for(const p of j){const C=(await Ce(p.text)).map(F=>({...F,source_question_ref:p.questionNum}));s.push(...C)}S(s)}catch{alert("AI Extraction Failed")}finally{t(!1)}}},$=(s,p,O)=>{const C=[...N];C[s]={...C[s],[p]:O},S(C)},q=s=>{S(p=>p.filter((O,C)=>C!==s))},V=async()=>{if(a)try{let s,p=N.length;if(x==="mock"){const F={};N.forEach(ne=>{const Y=ne.source_question_ref||"Uncategorized";F[Y]||(F[Y]=[]),F[Y].push(ne)}),s={type:"mock",sections:F}}else s={type:"simple",words:N};const O=x==="textbook"?{subject:z,publisher:T,chapter:c}:x==="mock"?{year:w,month:f,grade:g}:{},{error:C}=await je.from("missions").insert({title:m||"Untitled Project",category:x,metadata:O,data_payload:s,created_by:a.id,deadline:null,total_sets:Math.ceil(p/20)||1});if(C)throw C;d()}catch(s){alert("Error: "+s.message)}};return e.jsxs("div",{className:"bg-stone-900 h-full flex flex-col animate-fade-in relative",children:[e.jsxs("div",{className:"p-6 border-b border-white/10 flex justify-between items-center bg-black/20",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-serif text-white",children:"Create Project"}),e.jsxs("p",{className:"text-xs text-stone-500",children:["Step ",n," of 2"]})]}),e.jsx("button",{onClick:o,className:"text-stone-500 hover:text-white",children:e.jsx(K,{size:24})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-8",children:[n===1&&e.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[e.jsx("div",{className:"grid grid-cols-3 gap-4",children:[{id:"textbook",icon:re,label:"êµê³¼ì„œ (Textbook)"},{id:"mock",icon:ye,label:"ëª¨ì˜ê³ ì‚¬ (Mock)"},{id:"custom",icon:le,label:"ìžìœ  ìž…ë ¥ (Custom)"}].map(s=>e.jsxs("button",{onClick:()=>_(s.id),className:`p-6 rounded-xl border flex flex-col items-center gap-3 transition-all ${x===s.id?"bg-babel-gold/10 border-babel-gold text-babel-gold":"bg-black/40 border-white/10 text-stone-500 hover:bg-white/5"}`,children:[e.jsx(s.icon,{size:32}),e.jsx("span",{className:"font-bold text-sm",children:s.label})]},s.id))}),e.jsxs("div",{className:"bg-black/30 p-6 rounded-xl border border-white/5 space-y-6",children:[x==="textbook"&&e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase text-stone-500",children:"ê³¼ëª© (Subject)"}),e.jsx("select",{value:z,onChange:s=>I(s.target.value),className:"w-full bg-stone-900 border border-white/10 rounded p-3 text-white focus:border-babel-gold outline-none",children:["ê³µí†µì˜ì–´1","ê³µí†µì˜ì–´2","ì˜ì–´1","ì˜ì–´2","ì‹¬í™”ì˜ì–´"].map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase text-stone-500",children:"ì¶œíŒì‚¬ (Publisher)"}),e.jsx("input",{value:T,onChange:s=>b(s.target.value),onBlur:i,className:"w-full bg-stone-900 border border-white/10 rounded p-3 text-white",placeholder:"ì˜ˆ: NEëŠ¥ë¥ (ê¹€)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase text-stone-500",children:"ë‹¨ì› (Chapter)"}),e.jsx("input",{type:"number",value:c,onChange:s=>R(s.target.value),onBlur:i,className:"w-full bg-stone-900 border border-white/10 rounded p-3 text-white",placeholder:"ìˆ«ìžë§Œ ìž…ë ¥ (ì˜ˆ: 1)"})]})]}),x==="mock"&&e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase text-stone-500",children:"ì—°ë„ (Year)"}),e.jsx("select",{value:w,onChange:s=>W(s.target.value),className:"w-full bg-stone-900 border border-white/10 rounded p-3 text-white",children:[2025,2024,2023,2022,2021,2020].map(s=>e.jsxs("option",{value:s,children:[s,"ë…„"]},s))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase text-stone-500",children:"ì‹œí–‰ì›” (Month)"}),e.jsx("select",{value:f,onChange:s=>{E(s.target.value),i()},className:"w-full bg-stone-900 border border-white/10 rounded p-3 text-white",children:["3","6","9","10","11(ìˆ˜ëŠ¥)"].map(s=>e.jsxs("option",{value:s,children:[s,"ì›”"]},s))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase text-stone-500",children:"í•™ë…„ (Grade)"}),e.jsx("select",{value:g,onChange:s=>{r(s.target.value),i()},className:"w-full bg-stone-900 border border-white/10 rounded p-3 text-white",children:["1","2","3"].map(s=>e.jsxs("option",{value:s,children:["ê³ ",s]},s))})]})]}),e.jsxs("div",{className:"space-y-2 pt-4 border-t border-white/10",children:[e.jsx("label",{className:"text-xs uppercase text-stone-500",children:"í”„ë¡œì íŠ¸ëª… (Title)"}),e.jsx("input",{value:m,onChange:s=>u(s.target.value),className:"w-full bg-stone-900 border border-white/10 rounded p-3 text-white font-bold",placeholder:"ìžë™ìœ¼ë¡œ ìƒì„±ë˜ê±°ë‚˜ ì§ì ‘ ìž…ë ¥í•˜ì„¸ìš”"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>h(2),disabled:!m,className:"bg-white text-black px-6 py-2 rounded font-bold disabled:opacity-50 flex items-center gap-2 hover:bg-stone-200",children:["Next Step ",e.jsx(ce,{size:16})]})})]}),n===2&&e.jsxs("div",{className:"max-w-7xl mx-auto h-full flex flex-col gap-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(ie,{size:20,className:"text-babel-gold"})," AI Batch Extraction"]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("span",{className:"text-stone-500 text-sm",children:[j.length," passages queued"]})})]}),e.jsxs("div",{className:"flex-1 flex gap-6 min-h-0",children:[e.jsxs("div",{className:"flex-1 flex flex-col gap-4",children:[e.jsxs("div",{className:"bg-stone-800 rounded-xl border border-white/10 p-4 space-y-4 shadow-lg",children:[x==="mock"&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-babel-gold font-bold text-sm bg-black/40 px-3 py-1 rounded",children:"Q."}),e.jsx("input",{value:y,onChange:s=>D(s.target.value),placeholder:"e.g. 39 or 41-42",className:"bg-black/50 border border-white/10 rounded px-3 py-2 text-white outline-none focus:border-babel-gold w-full text-sm font-mono"})]}),e.jsx("textarea",{value:k,onChange:s=>v(s.target.value),className:"w-full h-32 bg-black/50 border border-white/10 rounded p-3 font-serif text-stone-300 resize-none focus:border-babel-gold outline-none text-sm leading-relaxed",placeholder:"Paste passage text..."}),e.jsxs("button",{onClick:L,disabled:!k,className:"w-full bg-stone-700 hover:bg-stone-600 text-white py-2 rounded font-bold flex justify-center items-center gap-2 text-sm transition-all",children:[e.jsx(Z,{size:16})," Add to Queue"]})]}),e.jsxs("div",{className:"flex-1 bg-stone-900 border border-white/10 rounded-xl overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-black/40 p-3 border-b border-white/10 flex justify-between items-center",children:[e.jsx("span",{className:"text-xs font-bold text-stone-500",children:"SCANNING QUEUE"}),e.jsxs("span",{className:"text-xs text-stone-600",children:[j.length," items"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:j.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-stone-700 gap-2",children:[e.jsx(J,{size:24}),e.jsx("p",{className:"text-xs",children:"Queue is empty"})]}):j.map(s=>e.jsxs("div",{className:"bg-black/20 p-3 rounded border border-white/5 flex gap-3 group",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:"text-babel-gold text-xs font-bold px-2 py-0.5 bg-yellow-900/20 rounded",children:s.questionNum})}),e.jsx("p",{className:"text-xs text-stone-500 line-clamp-2 font-serif",children:s.text})]}),e.jsx("button",{onClick:()=>P(s.id),className:"text-stone-600 hover:text-red-400 self-start p-1",children:e.jsx(ae,{size:14})})]},s.id))}),e.jsx("div",{className:"p-3 bg-black/20 border-t border-white/5",children:e.jsxs("button",{onClick:B,disabled:j.length===0||U,className:"w-full bg-babel-gold hover:bg-yellow-500 text-black py-3 rounded font-bold flex justify-center items-center gap-2 shadow-[0_0_15px_rgba(212,175,55,0.2)] disabled:opacity-50 disabled:shadow-none",children:[U?e.jsx(ke,{size:18,className:"animate-spin"}):e.jsx(ie,{size:18}),U?"Analyzing All...":"Analyze All"]})})]})]}),e.jsxs("div",{className:"flex-1 bg-stone-900 border border-white/10 rounded-xl overflow-hidden flex flex-col shadow-2xl",children:[e.jsxs("div",{className:"bg-black/40 p-4 border-b border-white/10 flex justify-between items-center",children:[e.jsxs("span",{className:"font-bold text-babel-gold text-sm flex items-center gap-2",children:[e.jsx(ce,{size:14})," ANALYSIS RESULTS"]}),e.jsxs("span",{className:"text-xs text-stone-500",children:[N.length," Words Found"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:N.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-stone-600 gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-stone-800 flex items-center justify-center",children:e.jsx(oe,{size:24})}),e.jsx("p",{className:"text-sm",children:"Results will appear here"})]}):N.map((s,p)=>e.jsxs("div",{className:"group bg-black/20 p-3 rounded border border-white/5 hover:border-babel-gold/30 transition-all flex gap-3 items-start",children:[e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 justify-between",children:[e.jsx("input",{value:s.word,onChange:O=>$(p,"word",O.target.value),className:"bg-transparent font-bold text-white outline-none w-full"}),s.source_question_ref&&e.jsx("span",{className:"text-[10px] text-stone-500 bg-stone-800 px-2 py-0.5 rounded",children:s.source_question_ref})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-[10px] text-stone-500 bg-white/5 px-1 rounded",children:s.phonetic}),e.jsx("input",{value:s.meanings_kr?.[0]||"",onChange:O=>{const C=[...s.meanings_kr||[]];C[0]=O.target.value,$(p,"meanings_kr",C)},className:"bg-transparent text-sm text-babel-gold outline-none w-full placeholder-stone-600",placeholder:"Meaning..."})]}),s.example_variations?.[0]&&e.jsxs("p",{className:"text-[10px] text-stone-500 italic truncate",children:['"',s.example_variations[0],'"']}),e.jsx("div",{className:"flex gap-1 text-[10px] text-stone-600",children:e.jsxs("span",{children:["Syn: ",s.synonyms?.slice(0,2).join(", ")]})})]}),e.jsx("button",{onClick:()=>q(p),className:"opacity-0 group-hover:opacity-100 p-2 text-stone-600 hover:text-red-400 transition-all",children:e.jsx(K,{size:14})})]},p))}),e.jsx("div",{className:"p-4 bg-black/40 border-t border-white/10",children:e.jsxs("button",{onClick:V,disabled:N.length===0,className:"w-full bg-green-600 hover:bg-green-500 disabled:opacity-50 text-white py-3 rounded-lg font-bold flex justify-center gap-2 shadow-lg",children:[e.jsx(Se,{size:18})," Save Complete Project"]})})]})]})]})]})]})},lt=()=>e.jsx("div",{className:"p-8 text-stone-400",children:"Paper Test Builder (Coming Soon)"});function gt(){const{signOut:o}=he(),d=xe(),[a,n]=l.useState("overview"),[h,x]=l.useState(!1),_=async()=>{await o(),d("/login")};return e.jsxs("div",{className:"min-h-screen ancient-bg text-[#292524] font-serif flex text-sm",children:[e.jsxs("aside",{className:"w-64 ancient-sidebar flex flex-col shadow-2xl z-20",children:[e.jsx("div",{className:"p-6 border-b border-[#451a03]/30",children:e.jsxs("h1",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-[#fbbf24] to-[#d97706] tracking-widest drop-shadow-[0_2px_2px_rgba(0,0,0,0.8)]",children:["VOCA UNIVERSE",e.jsx("span",{className:"text-[#a8a29e] text-xs block mt-1 font-sans tracking-normal font-normal opacity-80",children:"The Observatory"})]})}),e.jsxs("nav",{className:"flex-1 p-4 space-y-2",children:[e.jsx(G,{icon:e.jsx(Ke,{size:18}),label:"Overview",active:a==="overview",onClick:()=>n("overview")}),e.jsx(G,{icon:e.jsx(re,{size:18}),label:"Project Manager",active:a==="projects",onClick:()=>n("projects")}),e.jsx(G,{icon:e.jsx(se,{size:18}),label:"Student DB",active:a==="students",onClick:()=>n("students")}),e.jsx(G,{icon:e.jsx(le,{size:18}),label:"Paper Test",active:a==="print",onClick:()=>n("print")}),e.jsx("div",{className:"pt-4 mt-4 border-t border-[#451a03]/30",children:e.jsx(G,{icon:e.jsx(Xe,{size:18}),label:"Settings",active:a==="settings",onClick:()=>n("settings")})})]}),e.jsx("div",{className:"p-4 border-t border-[#451a03]/30",children:e.jsxs("button",{onClick:_,className:"flex items-center gap-3 text-[#78350f] hover:text-[#b45309] transition-colors w-full px-4 py-2 font-bold",children:[e.jsx(Ue,{size:18}),e.jsx("span",{children:"Sign Out"})]})})]}),e.jsxs("main",{className:"flex-1 flex flex-col relative z-10",children:[e.jsxs("header",{className:"h-16 flex items-center justify-between px-8 bg-[#0c0a09]/40 backdrop-blur-sm border-b border-[#78350f]/30 shadow-lg",children:[e.jsxs("h2",{className:"text-xl font-bold text-[#eaddcf] text-glow-gold tracking-wide",children:[a==="overview"&&"Dashboard Overview",a==="projects"&&"Project Management",a==="students"&&"Student Database",a==="print"&&"Paper Test Generator",a==="settings"&&"System Configuration"]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-[#a8a29e]",children:[e.jsx("span",{children:"Instructor Mode"}),e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse shadow-[0_0_8px_#22c55e]"})]})]}),e.jsxs("div",{className:"flex-1 overflow-auto p-6 scrollbar-hide",children:[a==="overview"&&e.jsx(Ye,{}),a==="projects"&&(h?e.jsx("div",{className:"p-8",children:e.jsx(rt,{onCancel:()=>x(!1),onComplete:()=>x(!1)})}):e.jsx(at,{onCreate:()=>x(!0)})),a==="students"&&e.jsx(st,{}),a==="print"&&e.jsx(lt,{}),a==="settings"&&e.jsx("div",{className:"p-8 ancient-card text-[#eaddcf]",children:"Settings Window (Under Construction)"})]})]})]})}const G=({icon:o,label:d,active:a,onClick:n})=>e.jsxs("button",{onClick:n,className:M("w-full flex items-center gap-3 px-4 py-3 rounded-sm transition-all duration-300 border-l-2",a?"ancient-menu-active":"border-transparent text-[#a8a29e] hover:text-[#fbbf24] hover:bg-[#0c0a09]/30"),children:[o,e.jsx("span",{className:M("font-medium",a?"font-bold":""),children:d})]});export{gt as default};
