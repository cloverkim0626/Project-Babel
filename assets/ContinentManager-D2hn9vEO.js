import{c as f,r as x,s as R,j as e,S as X}from"./index-CxDURwdF.js";import{C as ve,G as we,B as Z}from"./globe-D88iF9za.js";import{C as de}from"./circle-alert-DdIaksX2.js";import{B as je}from"./book-open-HbqM0iWU.js";import{A as Ne}from"./arrow-left-CDGCNdZG.js";import{X as ke}from"./x-CSBxUgK7.js";const _e=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],Se=f("chart-no-axes-column",_e);const Ce=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ie=f("check",Ce);const ze=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ae=f("chevron-down",ze);const $e=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Me=f("chevron-right",$e);const Te=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],dt=f("graduation-cap",Te);const Ie=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Pe=f("layers",Ie);const Ee=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Le=f("loader-circle",Ee);const Be=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],xe=f("pen",Be);const Oe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],he=f("plus",Oe);const We=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],qe=f("refresh-cw",We);const Re=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],De=f("save",Re);const Fe=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],Ge=f("scroll",Fe);const Ke=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ue=f("square-check-big",Ke);const Ve=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],be=f("target",Ve);const He=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ee=f("trash-2",He);const Je=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ye=f("users",Je),Qe=async c=>{await new Promise(p=>setTimeout(p,1500));const j=c.split(/\s+/).map(p=>p.replace(/[.,!?()"']/g,"")).filter(p=>/^[a-zA-Z]+$/.test(p)).filter(p=>p.length>3),P=[...new Set(j)],u={environment:{m:["환경","주위 상황","자연"],p:"/inˈvīrənmənt/",syn:["surroundings","setting","context"],ant:["vacuum","void","emptiness"]},sustainable:{m:["지속 가능한","견딜 수 있는","유지할 수 있는"],p:"/səˈstānəb(ə)l/",syn:["maintainable","viable","feasible"],ant:["unsustainable","fleeting","temporary"]},development:{m:["발전","개발","성장"],p:"/dəˈveləpmənt/",syn:["growth","evolution","expansion"],ant:["decline","regression","stagnation"]},challenging:{m:["도전적인","힘든","엄어려운"],p:"/ˈCHalənjiNG/",syn:["demanding","testing","arduous"],ant:["easy","simple","effortless"]},experience:{m:["경험","체험","경력"],p:"/ikˈspirēəns/",syn:["encounter","practice","exposure"],ant:["inexperience","ignorance","naivety"]},education:{m:["교육","훈련","양성"],p:"/ˌejəˈkāSH(ə)n/",syn:["schooling","learning","tuition"],ant:["ignorance","illiteracy","darkness"]},necessary:{m:["필수적인","필연적인","불가피한"],p:"/ˈnesəˌserē/",syn:["required","essential","indispensable"],ant:["optional","unnecessary","extra"]},provide:{m:["제공하다","공급하다","지급하다"],p:"/prəˈvīd/",syn:["supply","give","furnish"],ant:["withhold","deny","refuse"]},consider:{m:["고려하다","생각하다","여기다"],p:"/kənˈsidər/",syn:["think about","contemplate","examine"],ant:["ignore","neglect","disregard"]},usually:{m:["보통","대개","평소에"],p:"/ˈyo͞oZH(o͞o)əlē/",syn:["normally","generally","commonly"],ant:["rarely","seldom","never"]}};return P.slice(0,20).map(p=>{const _=u[p.toLowerCase()]||{m:["의미 검색 필요","뜻2","뜻3"],p:`/${p}/`,syn:["syn1","syn2","syn3"],ant:["ant1","ant2","ant3"]};return{id:crypto.randomUUID(),word:p,original_text:p,phonetic:_.p,part_of_speech:"noun/verb",meanings_kr:_.m,synonyms:_.syn,antonyms:_.ant,example_variations:[`In this context, ${p} implies...`,`Another usage: "The ${p} was very..."`,`Variation 3 using ${p}.`],difficulty_level:3}})},Xe=`You are an expert English teacher specialized in creating CSAT (College Scholastic Ability Test) style questions for Korean high school students. 
Your goal is to generate high-quality English reading comprehension questions based on the provided text.
The questions should test logical thinking, vocabulary, and understanding of context.
Output must be in JSON format.`,re={BLANK:c=>`
        Task: Create a "Blank Completion" question based on the text below.
        1. Select a key sentence that contains the central idea or a crucial logical connection.
        2. Replace a key word or phrase in that sentence with a blank (________).
        3. Provide 5 options (1 correct, 4 distractors). The distractors should be plausible but incorrect.
        4. Provide the correct answer and a brief explanation in Korean.

        Text:
        """
        ${c}
        """

        Response Format (JSON):
        {
            "question": "Choose the best word/phrase to fill in the blank.",
            "passage_with_blank": "Full text with ________ where the blank is.",
            "options": ["opt1", "opt2", "opt3", "opt4", "opt5"],
            "answer_index": 0, // 0-4
            "explanation": "Korean explanation here"
        }
    `,ORDER:c=>`
        Task: Create a "Paragraph Ordering" question.
        1. Split the text into a logical starting box (Box) and three shuffled segments (A, B, C).
        2. The correct order must be logically deduced from connection words, pronouns, etc.
        3. Provide the correct order and explanation.

        Text:
        """
        ${c}
        """

        Response Format (JSON):
        {
            "question": "Which is the correct order of the paragraphs?",
            "box_text": "The starting paragraph...",
            "segments": {
                "A": "Segment A text...",
                "B": "Segment B text...",
                "C": "Segment C text..."
            },
            "correct_order": ["B", "A", "C"],
            "explanation": "Korean explanation"
        }
    `,VOCAB:c=>`
        Task: Create a "Vocabulary Context" question.
        1. Select 5 difficult words in the text and underline them (mark as (A), (B), (C), (D), (E)).
        2. Choose one word used incorrectly in context (create a modified version of the text where one word is swapped with an antonym or irrelevant word) OR ask for the meaning.
        3. Let's stick to "Select the word that is NOT appropriate in context".
        
        Text:
        """
        ${c}
        """

        Response Format (JSON):
        {
            "question": "Which word is NOT used appropriately in context?",
            "passage_marked": "Text with (A)word1, (B)word2...",
            "options": [
                "(A) word1", "(B) word2", "(C) word3", "(D) word4", "(E) word5"
            ],
            "answer_index": 2,
            "explanation": "Korean explanation"
        }
    `,INSERTION:c=>`
        Task: Create a "Sentence Insertion" question.
        1. Select a key sentence to be removed from the text.
        2. Provide the text with a gap where the sentence was removed.
        3. Provide the removed sentence as the target.
        4. Ask where the target sentence fits best.

        Text:
        """
        ${c}
        """

        Response Format (JSON):
        {
            "question": "Where does the given sentence best fit?",
            "target_sentence": "The removed sentence...",
            "passage_with_gaps": "Text with [1], [2], [3]...",
            "answer": 3,
            "explanation": "Korean explanation"
        }
    `,SUMMARY:c=>`
        Task: Create a "Summary" question.
        1. Summarize the text in one sentence.
        2. Provide 5 options for the summary.

        Text:
        """
        ${c}
        """

        Response Format (JSON):
        {
            "question": "Choose the best summary of the passage.",
            "options": ["Summary A", "Summary B", ...],
            "answer_index": 0,
            "explanation": "Why this is the best summary"
        }
    `},Ze=c=>new Promise(j=>setTimeout(j,c)),et=async(c,j,P)=>{const u=re[j]?re[j](c):re.BLANK(c);return console.log(`[AI] Generating ${j} problem...`),console.log(`[AI] System Prompt: ${Xe.substring(0,50)}...`),console.log(`[AI] User Prompt: ${u.substring(0,50)}...`),await Ze(2e3),j==="BLANK"?{question:"Choose the best word to fill in the blank.",passage:c.replace(/important/i,"________"),options:["trivial","significant","minor","hidden","absent"],answer_index:1,explanation:"The context suggests that the concept is crucial, so 'significant' is the correct synonym for 'important'."}:j==="ORDER"?{question:"Which is the correct order of the paragraphs?",box_text:c.substring(0,50)+"...",segments:{A:c.substring(50,150)+"...",B:c.substring(150,250)+"...",C:c.substring(250)+"..."},correct_order:["C","A","B"],explanation:"Paragraph (C) introduces the topic, (A) gives an example, and (B) concludes it."}:{question:"Which word is NOT appropriate in context?",passage:c,options:["(A) good","(B) bad","(C) happy","(D) sad","(E) fast"],answer_index:2,explanation:"In this context, 'happy' contradicts the overall gloomy tone."}},tt=`
@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Noto+Serif+KR:wght@300;400;600&display=swap');

.font-library { font-family: 'Cinzel', serif; }
.font-body { font-family: 'Noto Serif KR', serif; }
.text-gold-glow { text-shadow: 0 0 10px rgba(212, 175, 55, 0.5); }
.border-gold-glow { box-shadow: 0 0 15px rgba(212, 175, 55, 0.2); }
.bg-mystery { background: radial-gradient(circle at center, #1c1917 0%, #0c0a09 100%); }
`,st=({onClose:c})=>{const[j,P]=x.useState([]),[u,p]=x.useState({}),[_,V]=x.useState(!0),[S,E]=x.useState(new Set),[H,D]=x.useState(null),[C,$]=x.useState(new Set),[m,A]=x.useState(new Set),[N,M]=x.useState([]),[F,O]=x.useState(!1),[T,te]=x.useState("BLANK"),[G,J]=x.useState(!1),[k,se]=x.useState(null),[v,ae]=x.useState(4),[K,Y]=x.useState(20),[s]=x.useState(10),[a,o]=x.useState("새로운 탐험 (New Expedition)"),[l,h]=x.useState([]),[g,w]=x.useState(null),r=x.useMemo(()=>Array.from({length:15},(n,i)=>({id:`user-${i+1}`,name:`학생 ${String.fromCharCode(65+i)} (Student ${i+1})`})).sort((n,i)=>n.name.localeCompare(i.name)),[]);x.useEffect(()=>{y()},[]);const y=async()=>{try{const{data:t,error:n}=await R.from("continents").select("*").order("created_at",{ascending:!1});if(n)throw n;t&&P(t)}catch(t){console.error("Project Fetch Error:",t),D(`Failed to load Archives: ${t.message}`)}finally{V(!1)}},W=async t=>{const n=new Set(C);if(n.has(t))n.delete(t);else{n.add(t),E(i=>new Set(i).add(t));try{const{data:i,error:d}=await R.from("passages").select("*").eq("continent_id",t).order("title",{ascending:!0});if(d)throw d;console.log(`Loaded ${i?.length} passages for project ${t}`),p(b=>({...b,[t]:i||[]}))}catch(i){console.error("Failed to load passages:",i),D(i.message||"Failed to load scrolls.")}finally{E(i=>{const d=new Set(i);return d.delete(t),d})}}$(n)},L=t=>{const n=new Set(m);n.has(t)?n.delete(t):n.add(t),A(n),O(!1)},le=(t,n)=>{const i=u[t]||[],d=new Set(m);i.forEach(b=>{n?d.add(b.id):d.delete(b.id)}),A(d),O(!1)},pe=()=>{const t=[];Object.values(u).forEach(n=>{n.forEach(i=>{if(m.has(i.id)&&i.words_data){const d=i.words_data.map(b=>({...b,_sourceId:i.id,_sourceTitle:i.title}));t.push(...d)}})}),M(t),O(!0)},me=t=>{M(n=>n.filter((i,d)=>d!==t))},ge=(t,n)=>{const i=r[t].id;let d=[...l];if(n.shiftKey&&g!==null){const b=Math.min(g,t),z=Math.max(g,t),q=r.slice(b,z+1).map(I=>I.id),B=new Set(d);q.forEach(I=>B.add(I)),d=Array.from(B)}else d.includes(i)?d=d.filter(b=>b!==i):d.push(i);h(d),w(t)},ue=()=>{l.length===r.length?h([]):h(r.map(t=>t.id))},fe=async()=>{if(m.size===0){alert("Please select a scroll (passage) first.");return}let t;for(const n of Object.keys(u)){const i=u[n].find(d=>d.id===Array.from(m)[0]);if(i){t=i;break}}if(t){J(!0);try{const n=`History has shown that technology does not always lead to betterment... (Content of ${t.title})`,i=await et(n,T);se(i)}catch(n){console.error(n),alert("AI Generation Failed")}finally{J(!1)}}},ce=N.length,U=F&&N.length>0?Math.ceil(N.length/K):m.size,ne=x.useMemo(()=>{if(U===0)return[];const t=Math.floor(U/v),n=U%v,i=[];let d=0;for(let b=1;b<=v;b++){const z=t+(b<=n?1:0);i.push({week:b,count:z,start:d+1,end:d+z}),d+=z}return i},[U,v]),ye=async()=>{if(l.length===0)return;if(k){const d=`AI가 생성한 '${T}' 문제를 ${l.length}명에게 배포하시겠습니까?
(Deploy AI Generated Problem)`;if(!confirm(d))return;try{const{data:b,error:z}=await R.from("missions").insert({title:a||`AI Generated: ${T} Problem`,category:"ai_problem",total_sets:1,data_payload:{type:"ai_generated",problem_type:T,content:k,source_passage_id:Array.from(m)[0]||null},config:{duration_weeks:1,split_size:1,points_award:s},created_by:"admin"}).select().single();if(z)throw z;const q=l.map(I=>({user_id:I,mission_id:b.id,set_index:1,week_number:1,status:"open",score:0})),{error:B}=await R.from("quest_sets").insert(q);if(B)throw B;alert("AI 문제 배포가 완료되었습니다! (AI Problem Deployed)"),c()}catch(b){console.error(b),alert("배포 실패 (Error): "+b.message)}return}if(m.size===0){alert("Please select at least one scroll or generate an AI problem.");return}const t=ce>0,n=t?"vocabulary_dist":"passage_assignment",i=t?`'${a}' 미션(단어 ${ce}개)을 ${l.length}명에게 배포하시겠습니까?`:`'${a}' 미션(지문 ${m.size}개)을 ${l.length}명에게 배포하시겠습니까?
(단어 미추출 - 지문 할당 모드)`;if(confirm(i))try{const{data:d,error:b}=await R.from("missions").insert({title:a,category:t?"vocabulary":"reading",total_sets:U,data_payload:{type:n,words:N,source_passages:Array.from(m)},config:{duration_weeks:v,split_size:K,points_award:s},created_by:"admin"}).select().single();if(b)throw b;const z=l.flatMap(B=>{const I=[];return ne.forEach(oe=>{for(let Q=oe.start;Q<=oe.end;Q++)I.push({user_id:B,mission_id:d.id,set_index:Q,week_number:oe.week,status:Q===1?"open":"locked",score:0})}),I}),{error:q}=await R.from("quest_sets").insert(z);if(q)throw q;alert("배포가 완료되었습니다! (Deployment Success)"),c()}catch(d){alert("배포 실패 (Error): "+d.message)}};return e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 animate-in fade-in duration-300",children:[e.jsx("style",{children:tt}),e.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-xl"}),e.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/dark-matter.png')] opacity-30 pointer-events-none"}),e.jsxs("div",{className:"relative bg-stone-950 border border-babel-gold/30 rounded-lg w-full max-w-7xl h-[85vh] flex flex-col shadow-[0_0_100px_rgba(212,175,55,0.15)] font-body overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-babel-gold/20 flex justify-between items-center bg-gradient-to-r from-stone-950 via-stone-900 to-stone-950",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-library text-babel-gold text-gold-glow flex items-center gap-3",children:[e.jsx(ve,{className:"text-babel-gold fill-babel-gold/20",size:28}),"THE LIBRARY OF BABEL"]}),e.jsx("p",{className:"text-xs text-stone-500 mt-1 font-library tracking-[0.2em] uppercase",children:"Mission Command Center"})]}),e.jsx("button",{onClick:c,className:"px-6 py-2 rounded border border-white/5 hover:border-babel-gold/50 text-stone-500 hover:text-babel-gold transition-all duration-300 font-library uppercase text-xs tracking-widest",children:"Close"})]}),e.jsxs("div",{className:"flex-1 min-h-0 grid grid-cols-12 divide-x divide-babel-gold/10",children:[e.jsxs("div",{className:"col-span-3 flex flex-col min-h-0 bg-stone-950/50",children:[e.jsx("div",{className:"p-4 border-b border-babel-gold/10 bg-black/20",children:e.jsxs("h3",{className:"text-xs font-bold text-babel-gold/70 uppercase flex items-center gap-2 tracking-[0.2em] font-library",children:[e.jsx(we,{size:12})," Source Archives"]})}),H&&e.jsxs("div",{className:"p-2 bg-red-900/20 border-b border-red-500/30 text-red-400 text-[10px] font-mono whitespace-pre-wrap",children:[e.jsx(de,{size:12,className:"inline mr-1"}),H]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 custom-scrollbar",children:_?e.jsx("div",{className:"text-center p-8 text-stone-600 font-library animate-pulse",children:"Accessing Archives..."}):j.map(t=>e.jsxs("div",{className:"border border-white/5 rounded overflow-hidden bg-stone-900/40 transition-all hover:border-babel-gold/30 group",children:[e.jsx("div",{onClick:()=>W(t.id),className:"p-3 flex items-center justify-between cursor-pointer hover:bg-white/5 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[C.has(t.id)?e.jsx(Ae,{size:14,className:"text-babel-gold"}):e.jsx(Me,{size:14,className:"text-stone-600 group-hover:text-babel-gold transition-colors"}),e.jsx("span",{className:`text-sm font-bold transition-all ${C.has(t.id)?"text-babel-gold":"text-stone-400 group-hover:text-stone-200"}`,children:t.display_name})]})}),C.has(t.id)&&e.jsxs("div",{className:"bg-black/40 border-t border-white/5 p-2 space-y-1 animate-in slide-in-from-top-2 duration-200",children:[e.jsxs("div",{className:"flex justify-end gap-3 px-2 py-2 mb-2 border-b border-white/5",children:[e.jsx("button",{onClick:()=>le(t.id,!0),className:"text-[10px] text-babel-gold hover:text-white transition-colors font-library tracking-wider",children:"ALL"}),e.jsx("button",{onClick:()=>le(t.id,!1),className:"text-[10px] text-stone-600 hover:text-stone-400 transition-colors font-library tracking-wider",children:"NONE"})]}),S.has(t.id)?e.jsxs("div",{className:"text-center py-6 text-xs text-babel-gold/50 font-library animate-pulse flex items-center justify-center gap-2",children:[e.jsx(Ge,{size:12})," Retrieving Scrolls..."]}):u[t.id]&&u[t.id].length>0?u[t.id].map(n=>e.jsxs("div",{className:"flex items-start gap-3 p-2 rounded hover:bg-white/5 group transition-all duration-300 border border-transparent hover:border-white/5",children:[e.jsx("div",{className:"pt-0.5",children:e.jsx("input",{type:"checkbox",checked:m.has(n.id),onChange:()=>L(n.id),className:"accent-babel-gold cursor-pointer w-3 h-3 border-babel-gold/50 rounded-sm bg-transparent"})}),e.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>L(n.id),children:[e.jsx("div",{className:`text-xs transition-colors font-serif ${m.has(n.id)?"text-babel-gold":"text-stone-400 group-hover:text-stone-200"}`,children:n.title}),e.jsxs("div",{className:"text-[10px] text-stone-700 mt-0.5 font-library",children:[n.words_data?.length||0," extracted words"]})]})]},n.id)):e.jsx("div",{className:"text-center py-6 text-[10px] text-stone-700 font-library italic",children:"No scrolls found in this archive."})]})]},t.id))})]}),e.jsxs("div",{className:"col-span-5 flex flex-col min-h-0 bg-stone-900/20 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-5 pointer-events-none"}),e.jsxs("div",{className:"p-4 border-b border-babel-gold/10 bg-black/20 relative z-10 flex justify-between items-center",children:[e.jsxs("h3",{className:"text-xs font-bold text-babel-gold/70 uppercase flex items-center gap-2 tracking-[0.2em] font-library",children:[e.jsx(be,{size:12})," Mission Calibration"]}),e.jsx("span",{className:"text-[10px] text-stone-600 font-mono",children:"BETA v0.2"})]}),e.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto p-8 space-y-8 relative z-10",children:[e.jsxs("div",{className:"bg-gradient-to-br from-stone-900 via-stone-900 to-stone-950 border border-babel-gold/20 p-4 rounded-lg relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-50",children:e.jsx(X,{className:"text-babel-gold animate-pulse-slow",size:16})}),e.jsx("h4",{className:"text-xs font-bold text-babel-gold mb-3 flex items-center gap-2 font-library uppercase tracking-widest",children:"AI Problem Studio"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-stone-500 uppercase tracking-wider mb-1 block",children:"Question Type"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["BLANK","ORDER","VOCAB","INSERTION"].map(t=>e.jsx("button",{onClick:()=>te(t),className:`text-[10px] py-2 border rounded transition-all ${T===t?"bg-babel-gold text-black border-babel-gold font-bold":"bg-transparent text-stone-500 border-white/10 hover:border-white/30"}`,children:t},t))})]}),e.jsxs("button",{onClick:fe,disabled:G||m.size===0,className:"w-full bg-stone-800 hover:bg-stone-700 text-stone-200 text-xs py-3 rounded border border-white/5 flex items-center justify-center gap-2 transition-all disabled:opacity-50",children:[G?e.jsx(Le,{size:14,className:"animate-spin"}):e.jsx(X,{size:14,className:"text-purple-400"}),G?"Designing...":"Generate Problem"]}),k&&e.jsxs("div",{className:"mt-3 p-3 bg-black/40 rounded border border-white/5 text-xs text-stone-300 space-y-2 animate-in slide-in-from-top-2",children:[e.jsx("div",{className:"font-bold text-babel-gold/80",children:"Preview:"}),e.jsxs("div",{children:["Q: ",k.question]}),k.options&&e.jsx("ul",{className:"list-disc list-inside text-stone-500 text-[10px]",children:k.options.map((t,n)=>e.jsx("li",{children:t},n))}),e.jsxs("div",{className:"text-[10px] text-green-700/70 border-l-2 border-green-900 pl-2",children:["Answer: ",k.answer_index!==void 0?k.options?.[k.answer_index]:k.answer]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-[10px] uppercase text-stone-500 mb-2 font-library tracking-widest group-hover:text-babel-gold transition-colors",children:"Mission Title"}),e.jsx("input",{value:a,onChange:t=>o(t.target.value),className:"w-full bg-transparent border-b border-stone-800 focus:border-babel-gold py-2 text-xl text-stone-200 font-library placeholder-stone-800 outline-none transition-all",placeholder:"Enter Mission Title..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] uppercase text-stone-500 mb-2 font-library tracking-widest",children:"Duration (Weeks)"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"range",min:"1",max:"12",value:v,onChange:t=>ae(Number(t.target.value)),className:"flex-1 accent-babel-gold h-1 bg-stone-800 rounded-lg appearance-none cursor-pointer"}),e.jsx("span",{className:"text-2xl font-library text-babel-gold",children:v})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] uppercase text-stone-500 mb-2 font-library tracking-widest",children:"Words / Set"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:K,onChange:t=>Y(Number(t.target.value)),className:"w-full bg-stone-900/50 border border-stone-800 rounded p-3 text-right text-white font-mono focus:border-babel-gold/50 outline-none transition-colors"}),e.jsx("span",{className:"absolute left-3 top-3 text-xs text-stone-600 pointer-events-none",children:"ea"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-end border-b border-white/5 pb-2",children:[e.jsxs("label",{className:"text-[10px] uppercase text-stone-500 flex items-center gap-2 font-library tracking-widest",children:[e.jsx(Ye,{size:12})," Acolytes (",l.length,")"]}),e.jsx("button",{onClick:ue,className:"text-[10px] text-babel-gold hover:text-white transition-colors font-library tracking-wider",children:"TOGGLE ALL"})]}),e.jsx("div",{className:"h-64 rounded bg-black/40 border border-white/5 overflow-y-auto p-2 select-none space-y-1 custom-scrollbar",children:r.map((t,n)=>e.jsxs("div",{onClick:i=>ge(n,i),className:`p-3 rounded-sm text-sm cursor-pointer flex justify-between items-center transition-all duration-200 ${l.includes(t.id)?"bg-babel-gold/10 text-babel-gold border-l-2 border-babel-gold":"text-stone-500 hover:bg-white/5 border-l-2 border-transparent"}`,children:[e.jsx("span",{className:"font-library tracking-wide text-xs",children:t.name}),l.includes(t.id)&&e.jsx(ie,{size:12,className:"text-babel-gold"})]},t.id))}),e.jsx("p",{className:"text-[9px] text-stone-600 text-right font-mono opacity-50",children:"* Hold SHIFT for range selection"})]}),e.jsxs("div",{className:"bg-stone-900/50 border border-white/5 p-6 rounded relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(Se,{size:40,className:"text-babel-gold"})}),e.jsx("h4",{className:"text-[10px] font-bold text-babel-gold/80 mb-4 flex items-center gap-2 uppercase tracking-widest font-library",children:"Projections"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-[10px] text-stone-600 uppercase border-b border-white/5 pb-2 mb-2 font-library tracking-wider",children:[e.jsx("span",{children:"Timeline"}),e.jsx("span",{children:"Load"}),e.jsx("span",{children:"Reward"})]}),ne.map(t=>e.jsxs("div",{className:"flex justify-between text-xs text-stone-400 py-1 border-b border-white/5 last:border-0 hover:text-stone-200 transition-colors",children:[e.jsxs("span",{className:"font-library text-babel-gold",children:["Week ",t.week]}),e.jsxs("span",{className:"font-mono text-[10px] opacity-70",children:[t.count," Sets"]}),e.jsxs("span",{className:"font-mono text-stone-500",children:[t.count*s," pts"]})]},t.week)),ne.length===0&&e.jsx("div",{className:"text-center py-4 text-xs text-stone-700 italic font-library",children:"Awaiting configuration..."})]})]})]})]}),e.jsxs("div",{className:"col-span-4 flex flex-col min-h-0 bg-black/40",children:[e.jsxs("div",{className:"p-4 border-b border-babel-gold/10 bg-black/20 flex justify-between items-center",children:[e.jsxs("h3",{className:"text-xs font-bold text-babel-gold/70 uppercase flex items-center gap-2 tracking-[0.2em] font-library",children:[e.jsx(je,{size:12})," Lux Veritatis"]}),e.jsxs("div",{className:"text-[10px] text-stone-600 font-mono",children:[N.length," Words"]})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto flex flex-col relative font-body custom-scrollbar",children:F?e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsx("div",{className:"flex justify-end mb-2",children:e.jsxs("button",{onClick:()=>M([]),className:"text-[10px] text-red-900 hover:text-red-500 transition-colors flex items-center gap-1 font-library uppercase tracking-wider",children:[e.jsx(ee,{size:10})," Clear Lux"]})}),N.map((t,n)=>e.jsxs("div",{className:"bg-stone-900/40 border border-white/5 p-3 rounded-sm flex gap-4 group hover:border-babel-gold/30 hover:bg-stone-900/60 transition-all duration-300",children:[e.jsx("div",{className:"text-[10px] font-library text-babel-gold/40 pt-1 w-6 text-right",children:n+1}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-stone-200 font-bold text-base font-serif tracking-wide group-hover:text-babel-gold transition-colors",children:t.word}),e.jsx("span",{className:"text-[10px] text-stone-600 font-mono tracking-tight",children:t.phonetic})]}),e.jsx("div",{className:"text-xs text-stone-400 mt-1 truncate pr-2 font-serif opacity-80",children:t.meanings_kr.join(", ")})]}),e.jsx("button",{onClick:()=>me(n),className:"opacity-0 group-hover:opacity-100 text-stone-600 hover:text-red-900 self-start p-1 transition-all transform hover:scale-110",children:e.jsx(at,{size:12})})]},n)),N.length===0&&e.jsxs("div",{className:"text-center py-20 text-stone-600 text-xs flex flex-col items-center gap-3 font-library",children:[e.jsx(de,{size:20,className:"opacity-30"}),e.jsx("span",{children:"The void returns no words."})]})]}):e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-8 text-center bg-transparent z-10",children:[e.jsx("div",{className:"w-20 h-20 rounded-full border border-babel-gold/20 flex items-center justify-center mb-6 shadow-[0_0_30px_rgba(212,175,55,0.05)] animate-pulse-slow",children:e.jsx(X,{size:24,className:"text-babel-gold opacity-70"})}),e.jsx("h4",{className:"text-stone-300 font-library text-lg mb-2 text-gold-glow",children:"Lexicon Extraction"}),e.jsxs("p",{className:"text-xs text-stone-500 mb-8 max-w-xs leading-relaxed",children:[m.size," Scrolls selected.",e.jsx("br",{}),"Initiate the extraction ritual to reveal the vocabulary."]}),e.jsxs("button",{onClick:pe,disabled:m.size===0,className:"group relative px-8 py-3 bg-transparent border border-babel-gold/30 text-babel-gold font-library text-xs tracking-[0.2em] uppercase hover:bg-babel-gold/10 transition-all disabled:opacity-20 disabled:cursor-not-allowed overflow-hidden",children:[e.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[e.jsx(X,{size:14})," Manifest Words"]}),e.jsx("div",{className:"absolute inset-0 bg-babel-gold/10 transform -translate-x-full group-hover:translate-x-0 transition-transform duration-500 ease-out"})]})]})}),e.jsxs("div",{className:"p-6 border-t border-babel-gold/10 bg-black/40 backdrop-blur flex justify-between items-center gap-4",children:[e.jsx("div",{className:"text-[10px] text-stone-600 font-library uppercase tracking-wider max-w-[200px] leading-relaxed",children:N.length>0?"Extraction Complete. Ready to Deploy.":"No words extracted. Deploying as Assignment Only."}),e.jsxs("button",{onClick:ye,disabled:l.length===0||m.size===0,className:`flex-1 ${N.length>0?"bg-babel-gold text-black hover:bg-yellow-500":"bg-transparent border border-babel-gold/50 text-babel-gold hover:bg-babel-gold/10"} py-4 rounded-sm shadow-[0_0_20px_rgba(0,0,0,0.5)] disabled:opacity-30 disabled:cursor-not-allowed flex justify-center items-center gap-3 transition-all duration-300 font-library uppercase tracking-[0.15em] text-xs font-bold`,children:[e.jsx(be,{size:16}),N.length>0?"Deploy Mission":"Assign Passages"]})]})]})]})]})]})},at=({size:c})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M18 6 6 18"}),e.jsx("path",{d:"m6 6 18 18"})]}),xt=({continent:c,initialView:j="list",onClose:P})=>{const[u,p]=x.useState(j),[_,V]=x.useState([]),[S,E]=x.useState([]),[H,D]=x.useState(!1),[C,$]=x.useState([{id:"new-1",title:"1",content:""}]),[m,A]=x.useState({}),[N,M]=x.useState("new-1"),[F,O]=x.useState(!1);x.useEffect(()=>{T()},[c.id]);const T=async()=>{try{const s="https://fdopvjopmmoadhoefkcf.supabase.co",a="sb_publishable_NT2tJi14GBr8Uh3I9SDROg_zM_v5KTi";let o="";try{o=s.split("//")[1].split(".")[0]}catch{}const l=`sb-${o}-auth-token`,h=localStorage.getItem(l)||localStorage.getItem(Object.keys(localStorage).find(r=>r.startsWith("sb-")&&r.endsWith("-auth-token"))||"");if(!h){console.warn("[ContinentManager] No auth token found for fetch");return}const g=JSON.parse(h).access_token;console.log("[ContinentManager] Fetching passages with manual token...");const w=await fetch(`${s}/rest/v1/passages?continent_id=eq.${c.id}&order=created_at.asc&select=*`,{method:"GET",headers:{apikey:a,Authorization:`Bearer ${g}`,"Content-Type":"application/json"}});if(w.ok){const r=await w.json();console.log("[ContinentManager] Fetched:",r.length,"passages"),V(r)}else console.error("[ContinentManager] Fetch error:",await w.text())}catch(s){console.error("Fetch failed",s)}},te=s=>{$([{id:s.id,title:s.title.replace("지문 ",""),content:s.content}]),A({[s.id]:s.words_data||[]}),M(s.id),p("add")},G=()=>{const s=`new-${Date.now()}`;$(a=>[...a,{id:s,title:`${a.length+1}`,content:""}]),M(s)},J=s=>{C.length!==1&&($(a=>a.filter(o=>o.id!==s)),N===s&&M(C[0]?.id||""))},k=(s,a,o)=>{$(l=>l.map(h=>h.id===s?{...h,[a]:o}:h))},se=async()=>{O(!0);try{const s={};for(const a of C){if(!a.content.trim())continue;const o=await Qe(a.content);s[a.id]=o}A(a=>({...a,...s}))}catch{alert("Analysis Failed")}finally{O(!1)}},v=(s,a,o)=>{A(l=>{const h=[...l[s]||[]];return h[a]={...h[a],...o},{...l,[s]:h}})},ae=(s,a)=>{A(o=>{const l=[...o[s]||[]];return l.splice(a,1),{...o,[s]:l}})},K=async()=>{const s=C.filter(r=>r.content.trim().length>0);if(s.length===0)return alert("저장할 지문이 없습니다.");const a="https://fdopvjopmmoadhoefkcf.supabase.co",o="sb_publishable_NT2tJi14GBr8Uh3I9SDROg_zM_v5KTi";let l="";try{let r="";try{r=a.split("//")[1].split(".")[0]}catch(L){console.error("URL Parse Error",L)}const y=`sb-${r}-auth-token`,W=localStorage.getItem(y)||localStorage.getItem(Object.keys(localStorage).find(L=>L.startsWith("sb-")&&L.endsWith("-auth-token"))||"");if(!W)throw new Error("No Auth Token Found");l=JSON.parse(W).access_token}catch{alert("인증 오류: 저장하기 전에 다시 로그인해주세요.");return}const h={apikey:o,Authorization:`Bearer ${l}`,"Content-Type":"application/json",Prefer:"return=representation"},g=[],w=[];for(const r of s){const y={continent_id:c.id,title:r.title.startsWith("지문")?r.title:`지문 ${r.title}`,content:r.content,word_count:r.content.trim().split(/\s+/).length,words_data:m[r.id]||[]};r.id.startsWith("new-")?g.push(y):w.push({...y,id:r.id})}try{if(g.length>0){const r=await fetch(`${a}/rest/v1/passages`,{method:"POST",headers:h,body:JSON.stringify(g)});if(!r.ok)throw new Error(await r.text())}if(w.length>0)for(const r of w){const y=await fetch(`${a}/rest/v1/passages?id=eq.${r.id}`,{method:"PATCH",headers:h,body:JSON.stringify(r)});if(!y.ok)throw new Error(await y.text())}alert("저장 완료!"),$([{id:"new-1",title:"1",content:""}]),A({}),p("list"),T()}catch(r){console.error(r),alert("저장 실패: "+r.message)}},Y=async s=>{if(!s||s.length===0)return;const a="https://fdopvjopmmoadhoefkcf.supabase.co",o="sb_publishable_NT2tJi14GBr8Uh3I9SDROg_zM_v5KTi";let l="";try{let g="";try{g=a.split("//")[1].split(".")[0]}catch{}const w=`sb-${g}-auth-token`,r=localStorage.getItem(w)||localStorage.getItem(Object.keys(localStorage).find(y=>y.startsWith("sb-")&&y.endsWith("-auth-token"))||"");if(!r)throw new Error("No Auth Token Found");l=JSON.parse(r).access_token}catch{alert("인증 오류: 삭제 권한이 없습니다.");return}const h={apikey:o,Authorization:`Bearer ${l}`,"Content-Type":"application/json"};try{const g=s.join(","),w=await fetch(`${a}/rest/v1/passages?id=in.(${g})`,{method:"DELETE",headers:h});if(!w.ok)throw new Error(await w.text());V(y=>y.filter(W=>!s.includes(W.id))),E([]),_.length-s.length<=0?confirm("모든 지문이 삭제되었습니다. 빈 프로젝트 폴더도 함께 삭제하시겠습니까?")&&(await fetch(`${a}/rest/v1/continents?id=eq.${c.id}`,{method:"DELETE",headers:h}),alert("프로젝트가 삭제되었습니다."),P()):alert("삭제 완료")}catch(g){alert("삭제 실패: "+g.message)}};return H?e.jsx(st,{onClose:()=>D(!1)}):e.jsxs("div",{className:"fixed inset-0 z-40 bg-stone-950 flex flex-col animate-in fade-in duration-300",children:[e.jsxs("div",{className:"h-16 border-b border-white/10 flex items-center justify-between px-6 bg-stone-900 shadow-xl z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:P,className:"text-stone-400 hover:text-white transition-colors",children:e.jsx(Ne,{size:20})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-serif text-babel-gold flex items-center gap-2",children:["Project : ",c.display_name]}),e.jsx("p",{className:"text-[10px] text-stone-500 uppercase tracking-widest",children:c.name})]})]}),e.jsxs("div",{className:"flex gap-3",children:[S.length>0&&e.jsxs("button",{onClick:()=>{confirm(`선택한 ${S.length}개 지문을 삭제하시겠습니까?`)&&Y(S)},className:"px-4 py-2 bg-red-900/40 text-red-400 border border-red-800 rounded hover:bg-red-800 hover:text-white transition-colors flex items-center gap-2",children:[e.jsx(ee,{size:16})," 선택 삭제 (",S.length,")"]}),e.jsxs("button",{onClick:()=>D(!0),disabled:S.length===0,className:"px-4 py-2 bg-blue-900/40 text-blue-400 border border-blue-800 rounded hover:bg-blue-800 hover:text-white transition-colors disabled:opacity-30 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(Pe,{size:16})," 선택 지문 배포 (",S.length,")"]})]})]}),e.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[e.jsxs("div",{className:"w-64 border-r border-white/10 bg-black/40 p-2 space-y-1",children:[e.jsxs("button",{onClick:()=>p("list"),className:`w-full text-left px-4 py-3 rounded flex items-center gap-3 transition-colors ${u==="list"?"bg-babel-gold/10 text-babel-gold border border-babel-gold/30":"text-stone-400 hover:bg-white/5"}`,children:[e.jsx(Ue,{size:16})," 지문 보관함"]}),e.jsxs("button",{onClick:()=>{$([{id:"new-1",title:"1",content:""}]),A({}),p("add")},className:`w-full text-left px-4 py-3 rounded flex items-center gap-3 transition-colors ${u==="add"?"bg-babel-gold/10 text-babel-gold border border-babel-gold/30":"text-stone-400 hover:bg-white/5"}`,children:[e.jsx(he,{size:16})," 지문 등록 / 수정"]})]}),e.jsxs("div",{className:"flex-1 overflow-hidden bg-stone-900/50 relative",children:[u==="list"&&e.jsx("div",{className:"h-full overflow-y-auto p-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl text-white font-serif",children:"Library Content"}),e.jsx("div",{className:"flex gap-2 text-xs",children:e.jsx("button",{onClick:()=>{S.length===_.length?E([]):E(_.map(s=>s.id))},className:"px-3 py-1 border border-white/20 rounded hover:bg-white/10 text-stone-300",children:"전체 선택"})})]}),e.jsx("div",{className:"space-y-2",children:_.map(s=>{const a=s.words_data&&Array.isArray(s.words_data)&&s.words_data.length>0;return e.jsxs("div",{className:`p-4 rounded-lg border flex items-center gap-4 transition-all ${S.includes(s.id)?"bg-blue-900/20 border-blue-500/50":"bg-stone-800 border-white/5 hover:border-white/20"}`,children:[e.jsx("div",{onClick:()=>E(o=>o.includes(s.id)?o.filter(l=>l!==s.id):[...o,s.id]),className:"cursor-pointer",children:S.includes(s.id)?e.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded flex items-center justify-center text-white",children:e.jsx(ie,{size:12})}):e.jsx("div",{className:"w-5 h-5 border border-stone-600 rounded"})}),e.jsxs("div",{className:"flex-1 cursor-pointer group",onClick:()=>te(s),children:[e.jsxs("h3",{className:"text-white font-bold group-hover:text-babel-gold transition-colors flex items-center gap-2",children:[s.title," ",e.jsx(xe,{size:12,className:"opacity-0 group-hover:opacity-100"})]}),e.jsxs("p",{className:"text-stone-500 text-xs truncate w-96 opacity-70",children:[s.content.substring(0,100),"..."]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-stone-400 text-sm font-mono",children:[s.word_count," words"]})}),a?e.jsxs("div",{className:"px-3 py-1 bg-green-900/30 text-green-400 border border-green-800 rounded text-xs flex items-center gap-1",children:[e.jsx(Z,{size:12})," Analyzed"]}):e.jsx("div",{className:"text-stone-600 text-xs",children:"Unanalyzed"}),e.jsx("button",{onClick:()=>{confirm("정말 삭제하시겠습니까?")&&Y([s.id])},className:"text-stone-600 hover:text-red-500 transition-colors",children:e.jsx(ee,{size:16})})]})]},s.id)})})]})}),u==="add"&&e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsxs("div",{className:"w-1/2 border-r border-white/10 p-6 overflow-y-auto bg-stone-900",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl text-white font-bold flex items-center gap-2",children:[e.jsx(xe,{size:18})," 지문 입력"]}),e.jsxs("button",{onClick:G,className:"px-3 py-1.5 bg-stone-800 border border-white/10 rounded hover:bg-stone-700 text-white text-xs flex items-center gap-2",children:[e.jsx(he,{size:14})," 지문 추가"]})]}),e.jsx("div",{className:"space-y-6 pb-20",children:C.map(s=>e.jsxs("div",{onClick:()=>M(s.id),className:`border rounded-xl p-4 transition-all cursor-pointer relative group ${N===s.id?"bg-stone-800 border-babel-gold ring-1 ring-babel-gold/50":"bg-stone-800/50 border-white/5 opacity-60 hover:opacity-100"}`,children:[e.jsxs("div",{className:"flex gap-3 mb-3",children:[e.jsxs("div",{className:"w-16",children:[e.jsx("label",{className:"text-[10px] uppercase text-stone-500 block mb-1",children:"번호"}),e.jsx("input",{className:"w-full bg-black/50 border border-white/10 rounded p-2 text-center text-white font-bold outline-none focus:border-babel-gold",value:s.title,onChange:a=>k(s.id,"title",a.target.value)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-[10px] uppercase text-stone-500 block mb-1",children:"내용 미리보기"}),e.jsxs("div",{className:"text-xs text-stone-400 truncate pt-2",children:[s.content.substring(0,50),"..."]})]}),e.jsx("button",{onClick:a=>{a.stopPropagation(),J(s.id)},className:"text-stone-600 hover:text-red-400 self-start",children:e.jsx(ke,{size:16})})]}),e.jsx("textarea",{className:"w-full h-48 bg-black/40 border border-white/10 rounded-lg p-3 text-stone-300 text-sm font-mono focus:border-babel-gold/50 outline-none resize-none leading-relaxed",placeholder:"지문 내용을 여기에 붙여넣으세요...",value:s.content,onChange:a=>k(s.id,"content",a.target.value)}),m[s.id]&&e.jsxs("div",{className:"mt-2 text-xs text-green-500 flex items-center gap-1",children:[e.jsx(ie,{size:12})," ",m[s.id].length," words analyzed"]})]},s.id))})]}),e.jsxs("div",{className:"w-1/2 bg-black/80 p-6 overflow-y-auto flex flex-col border-l border-white/5",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-white/10 sticky top-0 bg-black/95 z-10 backdrop-blur-sm",children:[e.jsxs("h2",{className:"text-xl text-white font-bold flex items-center gap-2",children:[e.jsx(Z,{size:18,className:"text-babel-gold"}),"AI 분석 결과"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:se,disabled:F,className:"px-4 py-2 bg-stone-800 hover:bg-stone-700 text-babel-gold hover:text-white border border-babel-gold/30 rounded text-sm transition-colors flex items-center gap-2",children:[F?e.jsx(qe,{size:14,className:"animate-spin"}):e.jsx(Z,{size:14}),"전체 지문 분석"]}),e.jsxs("button",{onClick:K,className:"px-4 py-2 bg-babel-gold text-black font-bold rounded hover:bg-yellow-500 text-sm flex items-center gap-2 shadow-lg",children:[e.jsx(De,{size:14})," 저장 (Update/Save)"]})]})]}),e.jsx("div",{className:"flex-1 space-y-4",children:(()=>{const s=C.flatMap(a=>(m[a.id]||[]).map((o,l)=>({...o,_passageId:a.id,_wordIndex:l,_sourceTitle:a.title})));return s.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-stone-600 space-y-4",children:[e.jsx(Z,{size:48,className:"opacity-10"}),e.jsxs("p",{className:"text-sm",children:["지문 입력 후 ",e.jsx("br",{}),e.jsx("span",{className:"text-babel-gold",children:'"전체 지문 분석"'}),"을 실행하세요."]})]}):e.jsxs(e.Fragment,{children:[s.map(a=>e.jsxs("div",{className:"bg-stone-900 p-4 rounded-xl border border-white/5 group hover:border-babel-gold/30 transition-all relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2 pb-2 border-b border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-[10px] font-bold bg-stone-800 text-babel-gold px-2 py-0.5 rounded border border-white/5",children:["No. ",a._sourceTitle]}),e.jsx("input",{className:"bg-transparent font-bold text-babel-gold text-lg outline-none w-28",value:a.word,onChange:o=>v(a._passageId,a._wordIndex,{word:o.target.value})}),e.jsx("input",{className:"bg-transparent text-stone-500 text-xs font-mono outline-none w-20",value:a.phonetic,onChange:o=>v(a._passageId,a._wordIndex,{phonetic:o.target.value})}),e.jsx("input",{className:"bg-stone-800 text-stone-300 text-[10px] px-1.5 py-0.5 rounded outline-none w-12 text-center",value:a.part_of_speech,onChange:o=>v(a._passageId,a._wordIndex,{part_of_speech:o.target.value})})]}),e.jsx("button",{onClick:()=>ae(a._passageId,a._wordIndex),className:"text-stone-600 hover:text-red-400 p-1 rounded",children:e.jsx(ee,{size:14})})]}),e.jsx("div",{className:"space-y-1 mb-2",children:[0,1,2].map(o=>e.jsx("input",{className:"w-full bg-transparent border-b border-white/5 py-1 text-xs text-stone-300 outline-none focus:border-babel-gold/50 placeholder-stone-700",placeholder:`Meaning ${o+1} (adj. meaning...)`,value:a.meanings_kr?.[o]||"",onChange:l=>{const h=[...a.meanings_kr||[]];h[o]=l.target.value,v(a._passageId,a._wordIndex,{meanings_kr:h})}},o))}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-[10px] text-stone-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold opacity-50",children:"SYN"}),e.jsx("input",{className:"bg-transparent w-full outline-none text-stone-400",value:a.synonyms?.join(", ")||"",onChange:o=>v(a._passageId,a._wordIndex,{synonyms:o.target.value.split(",").map(l=>l.trim())}),placeholder:"syn1, syn2, syn3"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold opacity-50",children:"ANT"}),e.jsx("input",{className:"bg-transparent w-full outline-none text-stone-400",value:a.antonyms?.join(", ")||"",onChange:o=>v(a._passageId,a._wordIndex,{antonyms:o.target.value.split(",").map(l=>l.trim())}),placeholder:"ant1, ant2, ant3"})]})]})]},`${a._passageId}-${a._wordIndex}`)),e.jsx("div",{className:"h-20"})]})})()})]})]})]})]})]})};export{Me as C,dt as G,Pe as L,st as M,he as P,Ge as S,ee as T,Ye as U,xt as a,ie as b,Le as c,De as d,Qe as e};
