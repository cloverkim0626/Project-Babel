import{c,r as d,j as e,b as p,u as C,e as M}from"./index-B1noLp-V.js";import{u as _,a as z}from"./useGameEngine-B7Ttbo0E.js";import{G as D}from"./globe-CxbVni6F.js";import{B as T}from"./book-open-4Xc8Hx7c.js";import{C as A}from"./calendar-3FCohxbA.js";import{C as f}from"./clock-DLRt34cl.js";import{S as R}from"./shield-C7Ll393f.js";import"./supabase-DQQ9Tr4x.js";const $=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],E=c("check",$);const I=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],w=c("dollar-sign",I);const P=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],L=c("file-text",P);const H=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Q=c("image",H);const B=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],F=c("list",B);const V=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],N=c("save",V);const W=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Z=c("triangle-alert",W);const U=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],G=c("users",U);const O=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],q=c("x",O),K=()=>{const[s,n]=d.useState(""),[a,i]=d.useState(""),[t,r]=d.useState(""),[h,m]=d.useState("#D4AF37"),x=()=>{!s||!a||(alert(`Creating Continent:
${a} (${s})
Image: ${t}`),n(""),i(""),r(""))};return e.jsxs("div",{className:"bg-black/40 border border-white/10 rounded-xl p-6",children:[e.jsxs("h2",{className:"text-xl font-serif text-white mb-6 flex items-center gap-2",children:[e.jsx(D,{size:20,className:"text-blue-400"}),"Continent Manager"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs uppercase tracking-widest text-stone-500 mb-2",children:"Raw Name (System ID)"}),e.jsx("input",{type:"text",value:s,onChange:o=>n(o.target.value),placeholder:"e.g., 2024 Sep Mock Exam",className:"w-full bg-black border border-white/20 rounded p-3 text-white focus:border-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs uppercase tracking-widest text-stone-500 mb-2",children:"Display Name (Fantasy)"}),e.jsx("input",{type:"text",value:a,onChange:o=>i(o.target.value),placeholder:"e.g., 9월의 황금 신전",className:"w-full bg-black border border-white/20 rounded p-3 text-white focus:border-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs uppercase tracking-widest text-stone-500 mb-2 flex items-center gap-2",children:[e.jsx(Q,{size:12})," Background Image URL"]}),e.jsx("input",{type:"text",value:t,onChange:o=>r(o.target.value),placeholder:"https://images.unsplash.com/...",className:"w-full bg-black border border-white/20 rounded p-3 text-white focus:border-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs uppercase tracking-widest text-stone-500 mb-2",children:"Theme Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:h,onChange:o=>m(o.target.value),className:"bg-transparent border-none w-10 h-10 cursor-pointer"}),e.jsx("input",{type:"text",value:h,onChange:o=>m(o.target.value),className:"flex-1 bg-black border border-white/20 rounded p-3 text-white uppercase font-mono"})]})]}),e.jsx("div",{className:"pt-4 text-right",children:e.jsxs("button",{onClick:x,disabled:!s||!a,className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-500 transition-colors text-xs uppercase tracking-widest font-bold disabled:opacity-50 flex items-center gap-2 ml-auto",children:[e.jsx(N,{size:14})," Register Continent"]})})]})]})},X=s=>{const a=Math.ceil(s/20);return Array.from({length:a},(i,t)=>({id:`auto-set-${Date.now()}-${t}`,index:t+1,wordCount:Math.min(20,s-t*20),status:t===0?"open":"locked"}))},J=()=>{const[s,n]=d.useState(""),[a,i]=d.useState(""),[t,r]=d.useState(3),[h,m]=d.useState(100),[x,o]=d.useState([]),b=()=>{const l=/(.+?)(?:\s{2,}|\t|\|)(.+)/,g=a.split(`
`).filter(S=>{const v=S.trim();return v.length>0&&l.test(v)});console.log(`Parsed ${g.length} valid pairs from input.`);const j=g.length,k=X(j);o(k),j===0&&a.trim().length>0&&alert(`Parser Warning: Could not detect 'Word [Separator] Meaning' pairs.
Try using ' | ', Tabs, or 2 spaces between word and meaning.`)},y=()=>{!s||!a||(alert(`Deploying Quest: ${s}
Target: All Students
Sets: ${x.length}
Reward: ${h} pts`),n(""),i(""),o([]))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/40 border border-white/10 rounded-xl p-6",children:[e.jsxs("h2",{className:"text-xl font-serif text-white mb-6 flex items-center gap-2",children:[e.jsx(T,{size:20,className:"text-babel-gold"}),"Quest Architect"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs uppercase tracking-widest text-stone-500 mb-2",children:"Quest Title"}),e.jsx("input",{type:"text",value:s,onChange:l=>n(l.target.value),className:"w-full bg-black border border-white/20 rounded p-3 text-white focus:border-purple-500 outline-none transition-colors",placeholder:"e.g., Week 2: The Crossing"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs uppercase tracking-widest text-stone-500 mb-2 flex items-center gap-2",children:[e.jsx(A,{size:12})," Deadline (Days)"]}),e.jsx("input",{type:"number",value:t,onChange:l=>r(parseInt(l.target.value)),className:"w-full bg-black border border-white/20 rounded p-3 text-white focus:border-purple-500 outline-none"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs uppercase tracking-widest text-stone-500 mb-2 flex items-center gap-2",children:[e.jsx(w,{size:12})," Reward (Pts)"]}),e.jsx("input",{type:"number",value:h,onChange:l=>m(parseInt(l.target.value)),className:"w-full bg-black border border-white/20 rounded p-3 text-white focus:border-purple-500 outline-none"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs uppercase tracking-widest text-stone-500 mb-2 flex items-center gap-2",children:[e.jsx(L,{size:12})," Raw Data (Format: Word | Meaning)"]}),e.jsx("textarea",{value:a,onChange:l=>i(l.target.value),onBlur:b,className:"w-full h-40 bg-black border border-white/20 rounded p-3 text-xs font-mono text-stone-300 focus:border-purple-500 outline-none resize-none",placeholder:`Apple | 사과
Banana | 바나나
Cipher | 암호
...`}),e.jsx("div",{className:"text-right text-[10px] text-stone-600 mt-1",children:a.length>0?`${a.split(`
`).filter(l=>l.trim()).length} words detected`:"Waiting for input..."})]}),e.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[e.jsx("button",{onClick:b,className:"px-4 py-2 bg-stone-800 text-stone-300 rounded hover:bg-stone-700 transition-colors text-xs uppercase tracking-widest",children:"Analyze & Preview"}),e.jsxs("button",{onClick:y,disabled:!s||!a,className:"px-6 py-2 bg-purple-600 text-white rounded hover:bg-purple-500 transition-colors text-xs uppercase tracking-widest font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(N,{size:14})," Deploy to World"]})]})]})]}),x.length>0&&e.jsxs("div",{className:"bg-black/40 border border-white/10 rounded-xl p-6 animate-in fade-in slide-in-from-bottom-4",children:[e.jsxs("h3",{className:"text-sm font-bold text-stone-400 mb-4 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(F,{size:14})," Extraction Preview"]}),e.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2 custom-scrollbar",children:[e.jsxs("div",{className:"flex justify-between text-[10px] text-stone-500 px-3 pb-2 border-b border-white/5",children:[e.jsx("span",{children:"Sequence"}),e.jsx("span",{children:"Scale"})]}),x.map(l=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded border border-white/5 hover:border-babel-gold/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-purple-500/20 text-purple-400 flex items-center justify-center text-xs font-bold",children:l.index}),e.jsxs("div",{className:"text-xs text-stone-300",children:["Quest Sequence #",l.index]})]}),e.jsxs("div",{className:"text-[10px] text-stone-500 font-mono",children:["~ ",l.wordCount," Words"]})]},l.id))]}),e.jsx("div",{className:"mt-4 p-3 bg-green-900/20 border border-green-500/30 rounded text-center",children:e.jsxs("p",{className:"text-xs text-green-400",children:["System Ready: ",x.length," Sets will be generated from input."]})})]})]})},u=Array.from({length:42},(s,n)=>({id:`student-${n}`,name:`Student ${n+1}`,level:Math.floor(Math.random()*5)+1,avgScore:Math.floor(Math.random()*40)+60,errorCount:n===3?24:Math.floor(Math.random()*15),lastActive:"2h ago"})),Y=()=>{const[s,n]=d.useState("all"),a=u.filter(t=>s==="danger"?t.avgScore<70:s==="review_needed"?t.errorCount>=20:!0),i=(t,r)=>{confirm(`Create Review Set for ${t} with ${r} errors?
This will create a new 'Review Mission' assigned only to this student.`)&&alert("Review Mission Created (Mock DB Insert)")};return e.jsxs("div",{className:"bg-black/40 border border-white/10 rounded-xl p-6",children:[e.jsxs("header",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-serif text-white flex items-center gap-2",children:[e.jsx(G,{size:20,className:"text-babel-gold"}),"Student Assignments & Monitor"]}),e.jsxs("div",{className:"flex gap-2 text-xs",children:[e.jsx("button",{onClick:()=>n("all"),className:p("px-3 py-1 rounded border transition-colors",s==="all"?"bg-white/10 border-white/30 text-white":"border-transparent text-stone-500 hover:text-stone-300"),children:"All Students"}),e.jsxs("button",{onClick:()=>n("danger"),className:p("px-3 py-1 rounded border transition-colors flex items-center gap-1",s==="danger"?"bg-red-900/20 border-red-500/30 text-red-400":"border-transparent text-stone-500 hover:text-red-400"),children:[e.jsx(Z,{size:12})," Danger Zone"]}),e.jsxs("button",{onClick:()=>n("review_needed"),className:p("px-3 py-1 rounded border transition-colors flex items-center gap-1",s==="review_needed"?"bg-yellow-900/20 border-yellow-500/30 text-yellow-500":"border-transparent text-stone-500 hover:text-yellow-500"),children:[e.jsx(f,{size:12})," Review Needed"]})]})]}),e.jsxs("div",{className:"grid grid-cols-5 text-[10px] text-stone-500 uppercase tracking-widest px-4 pb-2 border-b border-white/10",children:[e.jsx("div",{className:"col-span-2",children:"Student Identity"}),e.jsx("div",{className:"text-center",children:"Avg. Score"}),e.jsx("div",{className:"text-center",children:"Vault Errors"}),e.jsx("div",{className:"text-right",children:"Action"})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto custom-scrollbar space-y-1 mt-2",children:a.map(t=>{const r=t.errorCount>=20;return e.jsxs("div",{className:p("grid grid-cols-5 items-center p-3 rounded border transition-all hover:bg-white/5",r?"border-yellow-500/30 bg-yellow-900/10":"border-white/5 bg-transparent"),children:[e.jsxs("div",{className:"col-span-2",children:[e.jsxs("div",{className:"text-sm font-bold text-white flex items-center gap-2",children:[t.name,e.jsxs("span",{className:"text-[10px] font-normal text-stone-500 bg-black px-1.5 py-0.5 rounded border border-white/10",children:["Lv.",t.level]})]}),e.jsxs("div",{className:"text-[10px] text-stone-600 font-mono",children:["ID: ",t.id," • Last: ",t.lastActive]})]}),e.jsx("div",{className:"text-center font-mono text-sm",children:e.jsxs("span",{className:t.avgScore<70?"text-red-400":"text-green-400",children:[t.avgScore,"%"]})}),e.jsx("div",{className:"text-center",children:e.jsxs("span",{className:p("text-xs font-bold px-2 py-1 rounded",r?"bg-yellow-500 text-black animate-pulse":"text-stone-400"),children:[t.errorCount," / 20"]})}),e.jsx("div",{className:"text-right flex justify-end",children:r?e.jsxs("button",{onClick:()=>i(t.id,t.errorCount),className:"text-[10px] bg-babel-gold text-black font-bold px-2 py-1 rounded hover:scale-105 transition-transform flex items-center gap-1 shadow-[0_0_10px_rgba(212,175,55,0.3)]",children:[e.jsx(f,{size:10})," Create Review"]}):e.jsx("button",{className:"text-[10px] text-stone-600 hover:text-white border border-white/10 px-2 py-1 rounded",children:"View Details"})})]},t.id)})}),e.jsxs("div",{className:"mt-4 p-3 border border-white/5 bg-black/20 rounded flex items-center justify-between text-xs text-stone-500",children:[e.jsxs("span",{children:["Total Students: ",u.length]}),e.jsxs("span",{children:["Danger Zone: ",u.filter(t=>t.avgScore<70).length]})]})]})};function ie(){const{role:s}=_(),n=C(),{refundRequests:a,processRefund:i}=z();M.useEffect(()=>{s!=="master"&&n("/dashboard")},[s,n]);const t={totalStudents:42};return e.jsxs("div",{className:"min-h-screen bg-obsidian text-paper font-mono p-4 md:p-8",children:[e.jsxs("header",{className:"flex items-center justify-between border-b border-purple-500/30 pb-6 mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-serif text-purple-400 flex items-center gap-3",children:[e.jsx(R,{className:"fill-current"}),"Control Tower"]}),e.jsx("p",{className:"text-xs text-stone-500 uppercase tracking-widest mt-1",children:"Administrator Access Level: Alpha"})]}),e.jsxs("div",{className:"flex gap-4 text-xs",children:[e.jsxs("div",{className:"px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded text-purple-300",children:["Active Students: ",e.jsx("span",{className:"text-white font-bold",children:t.totalStudents})]}),e.jsx("button",{onClick:()=>n("/dashboard"),className:"hover:text-white transition-colors",children:"[Exit to Student View]"})]})]}),e.jsxs("main",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsx(K,{}),e.jsx(J,{})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(Y,{}),e.jsxs("div",{className:"bg-black/40 border border-white/10 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-sm font-bold text-stone-400 mb-4 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(w,{size:14,className:"text-green-500"})," Refund Requests (Cash Out)"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2 custom-scrollbar",children:a.length===0?e.jsx("div",{className:"text-xs text-stone-600 italic text-center py-8",children:"No pending requests"}):a.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded border border-white/10 hover:border-white/20 transition-colors",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold text-white mb-1",children:r.user}),e.jsxs("div",{className:"text-[10px] text-stone-500 uppercase tracking-widest",children:[r.amount," Pts • ",new Date(r.date).toLocaleDateString()]})]}),e.jsx("div",{className:"flex items-center gap-2",children:r.status==="pending"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>i(r.id,!0),className:"p-1 hover:bg-green-500/20 text-green-500 rounded",children:e.jsx(E,{size:14})}),e.jsx("button",{onClick:()=>i(r.id,!1),className:"p-1 hover:bg-red-500/20 text-red-500 rounded",children:e.jsx(q,{size:14})})]}):e.jsx("span",{className:p("text-[10px] uppercase font-bold px-2 py-0.5 rounded",r.status==="approved"?"bg-green-900/30 text-green-500":"bg-red-900/30 text-red-500"),children:r.status})})]},r.id))})]})]})]})]})}export{ie as default};
