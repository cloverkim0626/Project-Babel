import{c as r,r as n,s as f,j as e,e as y,u as P,b as T}from"./index-CcaOQPgg.js";import{M as D}from"./map-BGViG-7e.js";import{C as A}from"./calendar-e6E9yA1R.js";import{A as B}from"./arrow-right-HvT9OgCT.js";import{B as H}from"./book-open-DEbwDgW7.js";const E=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],O=r("file-text",E);const L=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],V=r("log-out",L);const $=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],q=r("plus",$);const I=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],R=r("save",I);const W=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],F=r("settings",W);const U=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Z=r("square-pen",U);const G=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],K=r("trash-2",G);const X=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],J=r("users",X);const Q=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Y=r("x",Q),ee=({onCreate:i})=>{const[c,t]=n.useState([]),[l,d]=n.useState(!0);n.useEffect(()=>{o()},[]);const o=async()=>{const{data:s,error:x}=await f.from("missions").select(`
                id, title, deadline, total_sets, created_at,
                continent:continents(name)
            `).order("created_at",{ascending:!1});!x&&s&&t(s),d(!1)};return l?e.jsx("div",{className:"p-8 text-stone-500 animate-pulse",children:"Loading Projects..."}):e.jsxs("div",{className:"p-8 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-serif text-white mb-2",children:"My Projects"}),e.jsx("p",{className:"text-stone-500 text-sm",children:"Manage your curriculum and test sets."})]}),e.jsxs("button",{onClick:i,className:"bg-babel-gold hover:bg-yellow-500 text-black px-4 py-2 rounded font-bold flex items-center gap-2 transition-colors",children:[e.jsx(q,{size:18})," New Project"]})]}),e.jsxs("div",{className:"bg-stone-900 border border-white/10 rounded-lg overflow-hidden",children:[e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-black/40 text-xs uppercase text-stone-500 border-b border-white/10",children:[e.jsx("th",{className:"p-4 font-medium",children:"Project Name"}),e.jsx("th",{className:"p-4 font-medium",children:"Continent (Zone)"}),e.jsx("th",{className:"p-4 font-medium",children:"Sets"}),e.jsx("th",{className:"p-4 font-medium",children:"Deadline"}),e.jsx("th",{className:"p-4 font-medium text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:c.map(s=>e.jsxs("tr",{className:"hover:bg-white/5 transition-colors group",children:[e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"font-bold text-white group-hover:text-babel-gold transition-colors",children:s.title}),e.jsxs("div",{className:"text-xs text-stone-600 font-mono",children:["ID: ",s.id.slice(0,8),"..."]})]}),e.jsxs("td",{className:"p-4 text-stone-400 flex items-center gap-2",children:[e.jsx(D,{size:14}),s.continent?.name||"Unassigned"]}),e.jsx("td",{className:"p-4 text-stone-400",children:e.jsxs("span",{className:"bg-stone-800 px-2 py-1 rounded text-xs border border-white/5",children:[s.total_sets," Sets"]})}),e.jsx("td",{className:"p-4 text-stone-400 text-sm",children:s.deadline?e.jsxs("div",{className:"flex items-center gap-2 text-yellow-500/80",children:[e.jsx(A,{size:14}),new Date(s.deadline).toLocaleDateString()]}):e.jsx("span",{className:"text-stone-600",children:"-"})}),e.jsx("td",{className:"p-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{className:"p-2 hover:bg-blue-500/20 text-blue-400 rounded transition-colors",children:e.jsx(Z,{size:16})}),e.jsx("button",{className:"p-2 hover:bg-red-500/20 text-red-400 rounded transition-colors",children:e.jsx(K,{size:16})})]})})]},s.id))})]}),c.length===0&&e.jsx("div",{className:"p-12 text-center text-stone-500 italic",children:"No projects found. Create your first mission above."})]})]})},te=({onCancel:i,onComplete:c})=>{const{user:t}=y(),[l,d]=n.useState(1),[o,s]=n.useState(""),[x,w]=n.useState("Valley of Echoes"),[m,k]=n.useState(""),[b,S]=n.useState(""),[u,N]=n.useState("fixed"),[j,v]=n.useState("mixed"),[g,M]=n.useState(0),C=()=>{const a=/(.+?)(?:\s{2,}|\t|\|)(.+)/,h=b.split(`
`).filter(z=>a.test(z.trim()));M(h.length)},_=async()=>{if(t)try{const{data:a}=await f.from("continents").insert({name:x,display_name:x}).select().single(),{error:h}=await f.from("missions").insert({title:o,continent_id:a?.id,data_payload:{raw:b},created_by:t.id,deadline:m?new Date(m).toISOString():null,total_sets:Math.ceil(g/20),config:{sequence_mode:u,test_type:j}});if(h)throw h;alert("Project Created Successfully!"),c()}catch(a){alert("Error creating project: "+a.message)}};return e.jsxs("div",{className:"bg-stone-900 p-8 rounded-lg border border-white/10 max-w-4xl mx-auto",children:[e.jsxs("header",{className:"flex justify-between items-center mb-6 pb-6 border-b border-white/10",children:[e.jsx("h2",{className:"text-xl font-serif text-white",children:"Create New Project"}),e.jsx("button",{onClick:i,className:"text-stone-500 hover:text-white",children:e.jsx(Y,{size:24})})]}),l===1&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase text-stone-500",children:"Project Title"}),e.jsx("input",{value:o,onChange:a=>s(a.target.value),className:"w-full bg-black/50 border border-white/10 rounded p-3 text-white focus:border-babel-gold outline-none",placeholder:"e.g. 2024 September Mock Exam"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase text-stone-500",children:"Continent (Zone Name)"}),e.jsx("input",{value:x,onChange:a=>w(a.target.value),className:"w-full bg-black/50 border border-white/10 rounded p-3 text-white focus:border-babel-gold outline-none",placeholder:"e.g. Valley of Echoes"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase text-stone-500",children:"Deadline (Optional)"}),e.jsx("input",{type:"datetime-local",value:m,onChange:a=>k(a.target.value),className:"w-full bg-black/50 border border-white/10 rounded p-3 text-white focus:border-babel-gold outline-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase text-stone-500",children:"Test Options"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:u==="fixed",onChange:()=>N("fixed"),className:"accent-babel-gold"}),e.jsx("span",{className:"text-sm text-stone-300",children:"Fixed Sequence"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:u==="random",onChange:()=>N("random"),className:"accent-babel-gold"}),e.jsx("span",{className:"text-sm text-stone-300",children:"Random Shuffle"})]})]}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:j==="mixed",onChange:()=>v("mixed"),className:"accent-babel-gold"}),e.jsx("span",{className:"text-sm text-stone-300",children:"Mixed Types"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:j==="eng_kor",onChange:()=>v("eng_kor"),className:"accent-babel-gold"}),e.jsx("span",{className:"text-sm text-stone-300",children:"Eng → Kor Only"})]})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs("button",{disabled:!o,onClick:()=>d(2),className:"bg-white text-black px-6 py-2 rounded font-bold disabled:opacity-50 hover:bg-stone-200 transition-colors flex items-center gap-2",children:["Next: Add Content ",e.jsx(B,{size:16})]})})]}),l===2&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("label",{className:"text-xs uppercase text-stone-500",children:"Word Data Input"}),e.jsxs("span",{className:"text-xs text-babel-gold",children:[g," Pairs Detected"]})]}),e.jsx("textarea",{value:b,onChange:a=>{S(a.target.value)},onBlur:C,className:"w-full h-64 bg-black/50 border border-white/10 rounded p-4 font-mono text-sm text-stone-300 focus:border-babel-gold outline-none",placeholder:`Apple | 사과
Banana   바나나
Dream(tab)꿈`}),e.jsx("p",{className:"text-xs text-stone-500",children:"Supports: Pipe (|), Tab, or Double Space separators."})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t border-white/10",children:[e.jsx("button",{onClick:()=>d(1),className:"text-stone-500 hover:text-white px-4 py-2",children:"Back"}),e.jsxs("button",{disabled:g===0,onClick:_,className:"bg-babel-gold text-black px-8 py-2 rounded font-bold hover:bg-yellow-500 flex items-center gap-2 disabled:opacity-50",children:[e.jsx(R,{size:18})," Create Project"]})]})]})]})},se=()=>e.jsx("div",{className:"p-8 text-stone-400",children:"Student Database Component (Coming Soon)"}),ae=()=>e.jsx("div",{className:"p-8 text-stone-400",children:"Paper Test Builder (Coming Soon)"});function ie(){const{signOut:i}=y(),c=P(),[t,l]=n.useState("projects"),[d,o]=n.useState(!1),s=async()=>{await i(),c("/login")};return e.jsxs("div",{className:"min-h-screen bg-stone-900 text-stone-200 font-sans flex text-sm",children:[e.jsxs("aside",{className:"w-64 bg-black border-r border-white/10 flex flex-col",children:[e.jsx("div",{className:"p-6 border-b border-white/10",children:e.jsxs("h1",{className:"text-xl font-serif text-babel-gold tracking-widest",children:["BABEL",e.jsx("span",{className:"text-stone-500 text-xs block mt-1 font-sans",children:"Control Tower"})]})}),e.jsxs("nav",{className:"flex-1 p-4 space-y-1",children:[e.jsx(p,{icon:e.jsx(H,{size:18}),label:"Project Manager",active:t==="projects",onClick:()=>l("projects")}),e.jsx(p,{icon:e.jsx(J,{size:18}),label:"Student DB",active:t==="students",onClick:()=>l("students")}),e.jsx(p,{icon:e.jsx(O,{size:18}),label:"Paper Test",active:t==="print",onClick:()=>l("print")}),e.jsx("div",{className:"pt-4 mt-4 border-t border-white/10",children:e.jsx(p,{icon:e.jsx(F,{size:18}),label:"Settings",active:t==="settings",onClick:()=>l("settings")})})]}),e.jsx("div",{className:"p-4 border-t border-white/10",children:e.jsxs("button",{onClick:s,className:"flex items-center gap-3 text-stone-500 hover:text-red-400 transition-colors w-full px-4 py-2",children:[e.jsx(V,{size:18}),e.jsx("span",{children:"Sign Out"})]})})]}),e.jsxs("main",{className:"flex-1 flex flex-col bg-stone-950",children:[e.jsxs("header",{className:"h-16 border-b border-white/5 flex items-center justify-between px-8 bg-stone-900/50 backdrop-blur-sm",children:[e.jsxs("h2",{className:"text-lg font-medium text-white",children:[t==="projects"&&"Project Management",t==="students"&&"Student Database",t==="print"&&"Paper Test Generator",t==="settings"&&"System Configuration"]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-stone-500",children:[e.jsx("span",{children:"Instructor Mode"}),e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]})]}),e.jsxs("div",{className:"flex-1 overflow-auto",children:[t==="projects"&&(d?e.jsx("div",{className:"p-8",children:e.jsx(te,{onCancel:()=>o(!1),onComplete:()=>o(!1)})}):e.jsx(ee,{onCreate:()=>o(!0)})),t==="students"&&e.jsx(se,{}),t==="print"&&e.jsx(ae,{}),t==="settings"&&e.jsx("div",{className:"p-8",children:"Settings"})]})]})]})}const p=({icon:i,label:c,active:t,onClick:l})=>e.jsxs("button",{onClick:l,className:T("w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200",t?"bg-babel-gold/10 text-babel-gold border border-babel-gold/20":"text-stone-400 hover:bg-white/5 hover:text-stone-200"),children:[i,e.jsx("span",{className:"font-medium",children:c})]});export{ie as default};
